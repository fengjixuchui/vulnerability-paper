> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/VI4IrKk4U-qOKCkh-9Lkkg)

**0X00    资源处理法**

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssnRgR25yAHBy2cxuhamQJvYD1ETNSib58DCE14xSU8z8HyhnJdwDialIA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ss8v0xBWWBGQDffafPXCbPuEibyXoFDrojWVY1icGHEvQdhmYaRhPTmHVg/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssia9k79q2quEkAssqPLIdGR3qkGckEfpU4DUGnsvrQqv7zeibf34hCgCA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssxvguF5b0HgxwHej0m5KokSOg9rKU2ianHNU3qVKPD8P5zl6r2a4qlUg/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssgedPajwSYa5ibjlasfqrffXel5FN8CRB7YNLre4j1UCiajLZ5o37kszw/640?wx_fmt=png)

推荐阅读：

https://www.cnblogs.com/claidx/p/7354034.html

小结：  
一定要尽量不加，不减，保证文件能用的情况下，大幅度的改。

**0X01    shellcode 处理法**

使用异或 + 随机数字混淆的方式，加密方式可以自定义，尽量做到小众、独创，然后只要在运行时解码就行，也可以想办法利用加载器加载加密到 txt 里面到 shellcode 或者其他加密的资源文件的加密 shellcode，也可以实现绕过静态查杀。

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssPicIib4e9lWjWEsjjbcmD2lPkGwMniaicvxCEiaqT6hn5xiccFQ5XfZNvnnQ/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssKOAUoO8V9MrmOtwbicDAV4MwIp6omURuKU4ZdibEF8SLcYVUnsqws43A/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssrJzfbV2kGvGMxPlfkuu33481AZoll5HiaxYgCJaAA39glU9S6Wqq7mA/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssbsoROP4QicBfRwVyQjBaGPWyibFHfBtzmubZvnz1VMerhzQ2yJWmvdYw/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssZsXGGKl8E5gflH6VWvT3u97ExKVGhFHnjDpoKmZEMA2cbL7ZXWT3NQ/640?wx_fmt=png)

**0X02    远程线程注入：**

1. 远程注入流程：

　　在进程 A 中创建远程线程，将线程函数指向为 LoadLibrary();

具体实现步骤：

1.  在进程 A 中分配空间，存储 “A.DLL”
    
2.  获取 LoadLibrary 函数的地址
    
3.  创建远程线程，执行 LoadLibrary();
    

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssVJCsKtmVWopSHKNwZ1wROia4opnoxpc6sv13norLnIWcKylibXXBgFsQ/640?wx_fmt=png)

![](https://mmbiz.qpic.cn/mmbiz_png/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ssz38dKnohlByaFBYqOsujelBgwJ5Qm5PEicXFYJK2n3twZl8VD5rvlyA/640?wx_fmt=png)

**0X03    动态绕过杀软**  

可以使用远程加载 shellcode 的方式，但是记得 shellcode 一定要加密处理，写成冲锋马的形式。

远程加载 shellcode 容易暴露自己的文件服务器地址，建议加一个域前置，可以用来隐藏服务器地址。

通过域前置的方法可以有效的隐藏我们 C2 地址或加载器的文件服务器。同时此类 CDN 地址可能存在于白名单，也可用于绕过流量监测。

![](https://mmbiz.qpic.cn/mmbiz_png/ndicuTO22p6ibN1yF91ZicoggaJJZX3vQ77Vhx81O5GRyfuQoBRjpaUyLOErsSo8PwNYlT1XzZ6fbwQuXBRKf4j3Q/640?wx_fmt=png)

**推荐阅读**  

https://www.cnblogs.com/zpchcbd/p/12170851.html

https://payloads.online/archivers/2019-11-10/2/

https://uknowsec.cn/posts/notes/ShellCode%E8%BF%9C%E7%A8%8B%E5%8A%A0%E8%BD%BD%E5%99%A8%E6%94%B9%E9%80%A0%E8%AE%A1%E5%88%92.html

**点赞，转发，在看**

原创投稿作者：cacker

![](https://mmbiz.qpic.cn/mmbiz_gif/IXOicg347dAhz4yaMaTUCBrbAtJoXe8ss8PBseqbydeyicrD0YmoqETnEj8jNkkYj24S7m7ic3mE8Eiab0Y3dsuvrg/640?wx_fmt=gif)