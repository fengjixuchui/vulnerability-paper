<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Zka4_vMd-HWQiZXa9I9mzw)

  

  

✎ 阅读须知

  

  

乌鸦安全的技术文章仅供参考，此文所提供的信息只为网络安全人员对自己所负责的网站、服务器等（包括但不限于）进行检测或维护参考，未经授权请勿利用文章中的技术资料对任何计算机系统进行入侵操作。利用此文所提供的信息而造成的直接或间接后果和损失，均由使用者本人负责。

乌鸦安全拥有对此文章的修改、删除和解释权限，如转载或传播此文章，需保证文章的完整性，未经允许，禁止转载！

本文所提供的工具仅用于学习，禁止用于其他，请在24小时内删除工具文件！！！

  

**失败mimikatz源码免杀和成功的免杀Windows Defender**
========================================

`本文周一的时候，工具就已经上传GitHub了，所以工具应该是已经失效了！！！仅供参考！`

`本文mimikatz源码编译未能免杀Windows Defender，后面使用的是其他的方式，思路和源代码暂不公开，希望师傅们能够理解！  
`

2. 免杀结论
=======

2.1 二次编译失败
----------

1.二次编译免杀`火绒`失败，秒杀！2.二次编译后，`联网360`全家桶环境下，有效期大概2分钟左右，后`360联网`上传样本后失效。3.`Windows Defender`免杀更不用想，秒杀！

2.2 其他方法成功
----------

`免杀火绒成功` 免杀`Windows Defender（关闭自动上传可疑样本）成功` `360`不进行测试，`联网`无意义！

相关免杀文件可在我的`GitHub`进行下载：

https://github.com/crow821/crowsec/tree/master/Bypass_mimikatz

欢迎多多star！

如果师傅在GitHub下载不方便的话，可以直接在公众号后台回复：猕猴桃 下载！

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyNF7Kz7Hj9rtfa3GgbmicrzicjJiazkT6miaH635HRnwAsBCaM0ic6xcOSiaQ/640?wx_fmt=png "null")  

3. 说明
=====

机器1：`Windows10` 编辑环境：`vs2012` 杀软：`360安全卫士联网最新版（带安全大脑，会自动上传样本）`

机器2：`Windows7` 杀软：`火绒联网最新版`

机器3：`Windows10` 杀软：`360杀毒联网最新版（会自动上传样本）`

机器4：`Windows10` 杀软：`Windows Defender（关闭自动上传样本）`

本文原本想学习下二次编译`mimikatz`免杀`360`和`火绒`，但是经过多次折腾之后发现，`火绒`依旧对其秒杀，`360杀毒`和`360安全卫士联网（带安全大脑）`只能算`免杀1分钟`，`Windows Defender`断网都能秒杀！其实过`火绒`和`360`有很多方法，不过在这只是为了学习（`无脑修改`）编译源码。本文按照一个去特征的思路，慢慢的做，一点点的分析（`坑自己`）。

其实在本文中，mimikatz源码去特征免杀难度排序的话，应该是：

`Windows Defender`（天下无敌） > `火绒`(联网不联网都一样) > `360安全卫士`(联网版，会自动上传样本) = `360杀毒`（联网版，会自动上传样本）> `360安全卫士`（不上传样本） >= `360杀毒` （不上传样本）

以上仅仅针对本文接下来的操作而已，其实实战中，火绒在一定程度上更容易过。

4. mimikatz源码编译
===============

从https://github.com/gentilkiwi/mimikatz直接将源代码下载下来：

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyojqCLTXeW1zmDwtX6ApWWzCFUNiatMicH7wBlOHtiaLNeV07PBfLjjodw/640?wx_fmt=png "null")  

将文件解压之后，使用`vs2012`打开：

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyIsicxY7bhciaya5QwyfO9LaQPnViaBMqlibN1jWjJX4VeUV1aKAqKMRicUg/640?wx_fmt=png "null")  

打开之后，可以看到当前存在报错信息：

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyCgNdxPeXdnDm8ibPQB3NHMKzDJCYkrB7GtghhQuGRQ6iaxfLU9MoewPA/640?wx_fmt=png "null")

  

在这里右键选择重新生成解决方案：

  

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyrJrK2WM8KrZLUS9E9FaYwpzia6MyPPsn6Uu93l7YpuZiaJib93ZcXibYoQ/640?wx_fmt=png "null")  

点击之后配置环境：

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyzEGH2Ey7rKY0ZFoNJFOiaS11bDj22KPAI4JYLd5p2dOG4zAxAO7Ym9A/640?wx_fmt=png "null")  

在当前环境中，选择`平台工具集-`>选择`visual Studio 2012（v110）`，然后应用。接着在`c/c++`的常规中，将错误属性设置为`否`。

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyiaCiagWn4BH826oCyQxuIZss0TMm41Frzliao8moh235iaRoJAwD1cEboA/640?wx_fmt=png "null")  

在解决方案中，点击属性：

![](https://mmbiz.qpic.cn/mmbiz_png/HficxWTTwt1Auz36k16zeILcxwFhsibfsyMAKaeibkhjAebDgT5vLmYZLKbfsNibv4zeCrGFHosrwST9RSRlIiaibuibw/640?wx_fmt=png "null")  

在配置属性中选择`x64`位：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

直接应用，在`解决方案处`，右键-->`重新生成解决方案`：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里需要一些时间会编译成功(`在这里很多人都是生成成功1个，失败0个，不过都是正常`)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

直接去文件夹下看文件：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里关闭所有防护，看下工具好不好用：最常用的命令：

```
privilege::debug   提取权限  
sekurlsa::logonpasswords   抓取密码
```

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

选择以管理员身份运行：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

能过获得`hash`信息，证明编译有效。

5. mimikatz正常编译免杀效果
===================

当前编译之后的`mimikatz`在`火绒`和`360`、`windows Defender`环境下测试：

5.1 360
-------

`360`右键`联网查杀`的时候，当即没有查出来，但是直接将样本进行上传，而且当右键运行`mimikatz`的时候，直接弹出警告信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

再次双击运行的时候，直接报毒！

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

5.2 火绒
------

复制进去之后，秒杀！

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

5.3 360杀毒
---------

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

5.4 windows Defender
--------------------

在这里压根不用测试`windows Defender`，会被杀的更快：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

因为本文使用的方法无法`bypass` `windows Defender`和`360安全卫士联网版（自动上传样本）`，所以本文下面的编译部分不会对`windows Defender`再进行测试，但是会选择性测试`360安全卫士联网版（自动上传样本）`。

6. mimikatz源码去特征
================

6.1 替换关键字mimikatz
-----------------

首先是去除`mimikatz`关键字，按照如图所示在文件中替换关键字：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里选择将`mimikatz`全部替换为`crowsec`(大小写要分开)，并且查找范围为`整个解决方案`：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

`大写`：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

替换关键字之后，在这里会报错，需要继续进行替换：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

将整个项目文件的`mimikatz`全部进行替换为`crowsec`关键字：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

此时已经替换完成：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

先不要继续替换了，编译下试试看，能否编译成功：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

成功以后，测试下功能：

```
privilege::debug   提取权限  
sekurlsa::logonpasswords   抓取密码
```

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

使用正常，测试下免杀能力：

### 6.1.1 火绒

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

直接被秒

### 6.1.2 360杀毒(会自动上传样本)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.2 mimilove.rc版本信息
-------------------

该文件主要是版本信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

删除敏感信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

删除之后：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在空白处右键新增版本信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

新增之后的信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

直接保存，然后使用`解决方案资源管理器`，切换到主视图：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里右键选择：`重新生成`！！！

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

等待编译后看看文件夹：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

同样的方法，试试能不能用，火绒能不能免杀：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.2.1 火绒

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.2.2 360杀毒（会自动上传样本）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

静态扫描无毒，打开提示病毒！

6.3 替换ico文件
-----------

如下图右键打开文件资源管理器：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

很多时候，杀软对图标（`hash`）比较敏感，所以在这里进行替换`ico`，自己制作`ico`的网站：http://www.bitbug.net

做的时候，记得是`32*32`大小。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

将新的图标进行替换：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

直接编译：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

得到文件（在这里因为缓存问题，小图标没有及时更新）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

老问题，看看能不能用，看看能不能免杀

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.3.1 火绒

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.3.2 360杀毒（会自动上传样本）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

扫描到肯定是无毒的，打开可以用，在这看到扫描的时间是`22:28:42`，趁着这个时间赶紧执行下，执行成功。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里发现了病毒，查阅日志发现，大概`2分钟`之后开始报毒！

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.4 mimilove.c
--------------

在`mimilove`中，找到`mimilove.c`文件，该文件主要是作者的信息：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.5 关键字creativecommons.org替换
----------------------------

将`creativecommons.org`替换为`baidu.com`

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

再次编译下看看(`编译时间较长`)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

编译成功，继续测试。

### 6.5.1 火绒

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.5.2 360杀毒（联网版）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

等一段时间再看下：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

大概`1分钟`之后，报毒！

6.6关键字gentilkiwi.com替换
----------------------

继续去除信息：将`gentilkiwi.com`替换为`google.com`

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

再次编译下：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

还是被杀：

### 6.6.1 火绒

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

### 6.6.2 360杀毒（联网版）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

执行命令之后，大概2分钟左右，被杀！

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.7 关键字benjamin替换
-----------------

将`benjamin`关键字使用同样的方法替换为`crowsec`

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

编译下再试试：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

在这里不区分大小写的情况下再试试：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.7 关键字gentilkiwi替换
-------------------

将`gentilkiwi`不区分大小写的替换为`crowkiwi`

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

编译成功：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

6.9 删除mimilove
--------------

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

还是被杀。。。。但是不清楚什么时候开始，360已经过了。。。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

同样，一段时间后：

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

7. 总结
=====

在这里可以看到：无论是如何去特征后编译，都无法正常免杀火绒。（当然，一定要细究的话，也是可以的，但是难度很高，费事！） `360`一般在本地不会主动查杀，其查杀靠的是其联网上传样本之后，因为云端查杀需要时间，所以在这之间有一段时间，可以运行木马执行命令。 `Windows Defender`更不用考虑，所以依靠源代码二次编译免杀的难度很高，可以采用其他的方式进行免杀(`暂不提供详情`)，在这里放`bypass`成功之后的图，在这里没有放360，毕竟上传样本伤不起！

其实到这里之后，再进行免杀研究的话，难度就会低一些了，师傅们见谅，这种方法只提供工具，暂时不能提供方法哈！

7.1 bypass 火绒
-------------

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

7.2 Windows Defender （不自动上传样本）
------------------------------

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  
![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg== "null")  

免杀脚本在Github上可以找到：

https://github.com/crow821/crowsec

tips：加我wx，拉你入群，一起学习

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)  

  

新书推荐

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

    过去网络安全距离我们很远，只要没有被攻击便可以忽略，而现在如果存在安全漏洞且一不小心被成功攻击，就可能导致很多公司财务等重要数据被勒索病毒感染，造成巨大经济损失！近几年来，国家展开了护网行动，加上各种机构经常组织CTF比赛等，网络安全越来越火，人才缺口也越来越大。“会渗透，是懂安全的基础；会漏扫，是懂渗透的基础；去实战，是检验能力的标准”此书可以给网络安全领域的专业人士或想入门的人士答疑解惑，是您必不可少的一本专业图书!  

本书从网络攻防实战的角度，对Web漏洞扫描利用及防御进行全面系统的研究，由浅入深地介绍了在渗透过程中如何对Web漏洞进行扫描、利用分析及防御，以及在漏洞扫描及利用过程中需要了解和掌握的基础技术。

全书共分10章，包括漏洞扫描必备基础知识、域名信息收集、端口扫描、指纹信息收集与目录扫描、Web漏洞扫描、Web常见漏洞分析与利用、密码扫描及暴力破解、手工代码审计利用与漏洞挖掘、自动化的漏洞挖掘和利用、Web漏洞扫描安全防御，基本涵盖了Web漏洞攻防技术体系的全部内容。书中还以一些典型漏洞进行扫描利用及实战，通过漏洞扫描利用来还原攻击过程，从而可以针对性地进行防御。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

  

点击上方链接，更多优惠等你哦~

  

  

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

扫取二维码获取

更多精彩

乌鸦安全

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)