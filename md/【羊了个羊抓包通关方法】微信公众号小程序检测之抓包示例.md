<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/xEAsQYRPs7SWQa06F9zDeQ)

【羊了个羊抓包通关方法】微信公众号小程序检测之抓包示例
===========================

1、微信小程序抓包
---------

**一、****Proxifier+Burpsuit** **抓包**

第一步：设置 Burpsuit 代理的监听 IP 为 127.0.0.1，监听端口为 8080。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7M0hDHsnbegKrNh3bOgCaU5y9vj7ygiaH0UzQCElDibzuTDXIW8pts8uw/640?wx_fmt=png)

第二步：Proxifier 添加代理服务器 IP 为 127.0.0.1，代理端口为 8080。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7OHticx6Opbib2Iq3CMIovDTib6icO5IdnpxznSrMXRIauTH7GouHAHpoWw/640?wx_fmt=png)

第三步：Proxifier 添加代理规则，将含有 wechatapp.exe 等字眼的程序进行代理，动作设置为代理服务器 127.0.0.1:8080。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7dtE4ocUxAicO1Ew1Q9lt2hp3hGnibZicAyGTduf7snNRss8n8hGZrs0ng/640?wx_fmt=png)

第四步：微信 PC 端打开小程序，在 Proxifier 可查看微信小程序进程已成功代理。

打开羊了个羊小程序，可以看到可以抓包成功。

![](https://mmbiz.qpic.cn/mmbiz_jpg/YknTYfPDxUTCWheibZsyx0cibHele2dlz7hW1RPV7iapDSaNMnR77kYRbcbdYvFCLXXG800atStFF1X9FHytrVmbQ/640?wx_fmt=jpeg)

在 Burpsuit 代理功能模块 HTTP 历史记录处可查看抓取的微信小程序通信数据包

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7qL1WBe1PrDpcAUlX85O4SzZuBcIicJTs5w6dE8Mbd4OzsXTOs7IFCGg/640?wx_fmt=png)

**二、****HTTPDebugger** **抓包**

打开 HTTPDebugger 软件。微信 PC 端打开小程序，在 HTTPDebugger 可查看微信小程序通信数据包。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7nIaUDT5mrafRLofl2OLFBneiaI9KUPFHIdZg5lKIL2LXibrWqymZkFtw/640?wx_fmt=png)

### 三、“羊了个羊” 通关方法

目前互联网上已经出现了很多通关介绍方法，比如可参考：[https://mp.weixin.qq.com/s/y8brttYE4HKmfJlRLdrCdQ](https://mp.weixin.qq.com/s?__biz=MzkxMTIyMjg0NQ==&mid=2247490997&idx=1&sn=6607767e01f2837ec928c5312ad155ec&scene=21#wechat_redirect) 这个链接的的文章说明，大部分都是要求能抓包会抓包，主要思路如下：

1.  第一方法：第一关很简单 map_id=80001，第二关 map_id=90016 很简单，那抓到这个 get 请求的返回包之后替换成 map_id=80001 的返回包，要以让第二关变成第一关；
    
2.  第二方法：获取到直接通关成功的数据包，然后一直重放该通关的数据包。
    

有些网友可能觉得抓包不是他们可以掌握的技能，纯就是想装个 X，怎么办，互联网上也已经出现了现成工具，一步通关，想通关几次任意，如下图所示：

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7OfdZCR2qDURhPguicouHMbB06Wj3BY3p7JDyyvHRYjVMlpWF7FvWzWQ/640?wx_fmt=png)

**获取该工具只要关注该公众号，然后后台发送 “****20220916”** **即可得到该工具下载链接。**

2、微信公众号抓包
---------

**一、使用内置浏览器开启调试模式抓包**

根据前文步骤开启调试功能，打开任意公众号。在内置浏览器空白处右击并点击 “Show DevTools”，开启调试功能，在 Network 功能可抓取通信数据包。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7cgk7zZw9EETvxgsFeGmoh8HeOT4ERrU5h6DKuNyrH26RSLMFm06SrA/640?wx_fmt=png)

在 Sources 功能可对 js 文件设置断点，查看参数值。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7abRf59uPBaTB7jFHcAgKK1ZxnwS1U1CmAsCpq8L4rzsadFroY3EK2A/640?wx_fmt=png)

在 Console 功能可查看打印日志信息。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7VXsf0yIdmVf0vkODpqEE7NPc6q1zyM0XQeU5ziaryhJfPDpiauhZAjjQ/640?wx_fmt=png)

**二、****IE** **浏览器设置代理** **+Burpsuit** **抓包**

第一步：设置 Burpsuit 代理的监听 IP 为 127.0.0.1，监听端口为 8080。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7M0hDHsnbegKrNh3bOgCaU5y9vj7ygiaH0UzQCElDibzuTDXIW8pts8uw/640?wx_fmt=png)

第二步：打开 IE 浏览器，打开工具设置（右上角齿轮图标），点击 Internet 选项，选择连接标签页，点击局域网设置，勾选选项 “为 LAN 使用代理服务器”，设置代理 IP 为 127.0.0.1，代理端口为 8080（即 Burpsuit 监听 IP 及端口）。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7LGznXn8VmL4cJpLhQY0zT1RlF0A0vNzElgqRj2EZSJWgVxDS2PDlew/640?wx_fmt=png)

第三步：微信 PC 端打开微信公众号，在 Burpsuit 代理功能模块 HTTP 历史记录处可查看抓取的微信公众号通信数据包。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7XyUcpvsSraYrDOmQ9ln38mCaqFWkAevpeuLY2icRfTsP53Z4IAczqfQ/640?wx_fmt=png)

注：若微信公众号后台使用自有服务器，则可抓取到该微信公众号后台使用的 IP 或域名（非 mp.weixin.qq.com）。

![](https://mmbiz.qpic.cn/mmbiz_png/YknTYfPDxUTCWheibZsyx0cibHele2dlz7oribVRkT2Vd5lJrSC3rb2EsGKLxWY5ShH2icdXOBRsC9wibm8SMNjQdqg/640?wx_fmt=png)

注：《关键信息基础设施安全保护条例》明确规定：未经国家网信部门、国务院公安部门批准或者保护工作部门、运营者授权，任何个人和组织不得对关键信息基础设施实施漏洞探测、渗透性测试等可能影响或者危害关键信息基础设施安全的活动。

本文仅进行技术分享，禁止用于任何非法活动！！！