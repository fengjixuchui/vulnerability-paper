> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/BB34N50q2aWrVgu5LDcj6g)

  

文章首发于：

火线Zone社区（https://zone.huoxian.cn/）

  

**0x01 前言**

  

笔者之前在[Web漏洞挖掘指南 -SSRF服务器端请求伪造](http://mp.weixin.qq.com/s?__biz=MzI2NDQ5NTQzOQ==&mid=2247488968&idx=1&sn=72d78859f0f6d03c6872ba98fde3faf8&chksm=eaaa9de8dddd14fe24d75b05269c8e5fe317b63e6d78ab4f6bbe23a7659c3692e4f1e8d72032&scene=21#wechat_redirect)介绍了SSRF某些场景下的利用和绕过方法,有时开发对于SSRF的限制可能是简单的禁用内网地址来实现的，这时如果传入一个外网地址，将其重定向至内网地址，则可以绕过限制对内网服务器发出请求。

  
302跳转bypass常见的方法有：

  

1.  自建服务器，当收到目标服务器的请求后添加一个Location响应头重定向至内网服务器，Tips中有提到过：https://zone.huoxian.cn/d/392
    
2.  线上平台生成短链接:
    

![图片](https://mmbiz.qpic.cn/mmbiz_png/0Z0LqMyVGaTh0lunR4E40Sb4s3TKoMf2WhTdbuqKosrxLae6o32t4TL5EOVSelh5kXJjxKDKibZNibTOEFNRlbbg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

上面两种方式都有其弊端，前者需要直接搭建服务器环境，成本较高，后者在线平台生成的短链接一般都有时间限制，在研究对象存储时，笔者发现利用对象存储的静态网站托管及回源规则进行重定向也是一种可行的办法。

  

**0x02 静态网站托管及回源配置**

  

静态网站托管功能允许用户将静态网站托管到OSS的存储空间（Bucket），并使用Bucket的访问域名访问这个网站。Bucket配置静态网站托管后，当客户端向OSS请求的数据不存在时，可通过设置回源规则确保其仍然可以获取正确的数据。

  

在控制台进行图形化配置过程：

  

创建一个存储桶

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

开通公有读权限：

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

进入Bucket列表，在左侧导航栏，选择基础设置 > 静态页面。进行如下配置：

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

在左侧导航栏，选择基础设置 > 镜像回源。

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

创建如下回源规则，回源地址即需要重定向的内网地址（如果显示固定地址不能为空，可抓包修改或者输入空格即可创建成功）。

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

访问存储桶对外访问的链接，随后便跳转至http://127.0.0.1/index.html

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

  

**【火线Zone云安全社区群】**

进群可以与技术大佬互相交流

进群有机会免费领取节假日礼品

进群可以免费观看技术分享直播

识别二维码回复【社区群】进群

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

**【火线zone社区周激励】**

2022.3.14～ 2022.3.20公告

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

**【相关精选文章】**

[![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)](http://mp.weixin.qq.com/s?__biz=MzI2NDQ5NTQzOQ==&mid=2247493027&idx=1&sn=3877d1d590784c1092c7eb19c085af1a&chksm=eaa96d83dddee49581363c963e6f1819049dce7e14f01f99e944a6412e6ac7bcf47a9d08b26a&scene=21#wechat_redirect)

[![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)](http://mp.weixin.qq.com/s?__biz=MzI2NDQ5NTQzOQ==&mid=2247492892&idx=1&sn=54ab8f9b01c133d025be9b325ceb8555&chksm=eaa96d3cdddee42af08847669b06298c7ffcb3ca0ed185329c9662d42ee0d633a49f479d732d&scene=21#wechat_redirect)

[![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)](http://mp.weixin.qq.com/s?__biz=MzI2NDQ5NTQzOQ==&mid=2247492924&idx=1&sn=99508a2abeab9b62834028df2b116d3d&chksm=eaa96d1cdddee40afb331420855682afdfbd5c478032c31af52cb724e804e708bdae93bceb43&scene=21#wechat_redirect)

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

火线Zone是[火线安全平台]运营的云安全社区，内容涵盖云计算、云安全、漏洞分析、攻防等热门主题，研究讨论云安全相关技术，助力所有云上用户实现全面的安全防护。欢迎具备分享和探索精神的云上用户加入火线Zone社区，共建一个云安全优质社区！

  

如需转载火线Zone公众号内的文章请联系火线小助手：hxanquan（微信）

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

 **微信号** 

huoxian_zone

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

点击阅读原文，加入社区，共建一个有技术氛围的优质社区！