<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/2oSWKF36tbbT9OLwb2_lXA)

1. 创建 ekp 用户
------------

```
useradd ekp  //添加用户名ekp  
passwd ekp  //为用户ekp设置密码
```

2. 使用 ekp 用户登录
--------------

```
unzip linux64.zip  
unzip ekp.zip
cd linux64
chmod +x *.sh
```

3. 启动 / 关闭 Tomcat 服务器
---------------------

确定当前目录路径为`/home/ekp/linux64`

```
./init.sh
```

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibXrwFYz84ibOSKcPKiaT8lgKngWnGib8o3KE89OnVoIknxePFv2RmGeNuw/640?wx_fmt=png)

初始化成功后，退出 ssh，再重新登录 ssh，使环境变量生效。再启动 tomcat

`./start-safe64.sh`

如果提示`The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path`, 可忽略，不影响后面使用

如果报错`没有找到配置文件：null/WEB-INF/KmssConfig/admin.properties`, 为授权已经过期

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibE3vAE5D41IuWlJw5jKTOHTVxOvVCGoicJBCVaGSpxEiaicvQH2xsHWXJw/640?wx_fmt=png)

配置数据库，访问 http://192.168.3.225:8080/ekp/admin.do 密码在 ekp/WEB-INF/KmssConfig/admin.properties 文件中

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgib0RuZbibFOHL6XO1DCeKdwneNB1B9wTRNWp5mrrV2LEZ60zyyZXXtURA/640?wx_fmt=png)

通过 docker 来启动 mysql

`docker run -itd --restart=always --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7`

创建对应数据库

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibt0PPN1GTTMFfMyYVP5ibSPkBWrHKdiamgCAUL16sHhnXXdgC4hJtwE5g/640?wx_fmt=png)

测试数据库是否正常

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgib2hhQdKwWpye4OgibBXnic9FbPAIKDU56KKV4oaic35a5GxNWGagXdJWBQ/640?wx_fmt=png)

配置完成后，保存

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibrR8US6KsicLhLgLkibsaIFib2KkecDoPoxPF6BkFa4XXraO1QHkyQMMWg/640?wx_fmt=png)

执行`./stop-tomcat.sh`, 关闭 tomcat, 然后启动`./start-normal64.sh`, 第一次启动会创建数据库, 启动成功以后访问

http://192.168.3.225:8080/ekp/sys/

然后执行系统初始化

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibkqQ4NwluI3B94bcNKLmvia8Jc1RnUic9zm3WtMaf4MIpR7IORBTUMv9Q/640?wx_fmt=png)

4. 远程 debug
-----------

修改 tomcat 下 bin 文件夹中的`catalina64.sh`,localhost 修改为 0.0.0.0

![](https://mmbiz.qpic.cn/mmbiz_png/noZJ3Kqbu1c1tbQ7r4ArDzLBibLT7iaQgibCvf5BSqOtSwqiaq4xN9dfZX8BUbbzsnZZJy6Ajf8e8IuCEKYQNEAhsw/640?wx_fmt=png)

然后重新启动 tomcat，在 idea 中远程调试即可