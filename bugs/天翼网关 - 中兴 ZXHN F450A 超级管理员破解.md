<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/3p8dE8bOxYKJuI8ylqLHAQ)

前因
==

家里的光猫换了一个，但上网时发现，家里光猫的 WiFi 没有给电脑终端分配公网 ipv6，我怀疑是装机的师傅是没有 LAN 端口绑定, 或直接就没有选择 ipv6。未来是 ipv6 的，可玩性和实用性越来越高，普通人也可以拥有自己的公网 ipv6 地址，尤其是 ipv4 地址枯竭的当下。不给 IPv6，是可忍熟不可忍。但相关设置要进光猫管理后台，但运营商的可恶嘴脸就显露出来了，

> 访问光猫通过两个用户名来控制:**「telecomadmin」**和**「useradmin」**
> 
> > > > *   用户名 "telecomadmin" 可以不受限制地浏览和修改光猫配置。
> > > >     
> > > > *   用户名 "useradmin" 可以访问，浏览配置和统计表。（密码在机身上有写）
> > > >     
> 
> ☹☹☹

用光猫背面的默认账号（useradmin 账户）登录只能获得普通权限，功能少得可怜，做不了什么操作。就只有更改光猫自带的 WiFi 的名字密码杂七杂八的。telecomadmin 账户也就是俗称光猫超级管理员账号，打装机师傅的电话索要，一问三不知，不知是真不知道还是假知道的，打 10000 号，客服也是各种抱歉，对不起。就真吐了啊，你对一些不懂的人还好糊弄，对我不行。赤裸裸的坑消费者，不知道有什么坏水。

后果
==

至少我这里想通过正规渠道获得超密是不可能了，那就破解得到。

网上其实有很多教程，但大多对自己无用，光猫的型号和版本都会影响破解，服了。通过自己不懈努力，终于还是拿到了超密，在这记录一下：

> ### 再次说明
> 
> *   192.168.1.1/romfile.cfg **「x」**
>     
> *   拼接密码啥啥啥 **「x」**
>     
> *   http://192.168.1.1/backupsettings.conf **「x」**
>     
> *   其它一些破解方法如 Telnet **「x」**
>     
> 
> ☹☹☹

我的光猫
----

> ![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvJc5cN8rthWj2Vo5RlJsOYZu7buGBmKQichv3ia48PRU5s9nm0U0U4CEA/640?wx_fmt=jpeg)
> 
> ### 环境
> 
> *   四川电信运营商
>     
> *   网关型号 ZXHN F450A
>     
> 
> ### 实现原理
> 
> 利用文件越权漏洞破解：通过 Fiddler 抓包，强制改文件路径，复制配置文件进 U 盘，将配置文件解密
> 
> ☹☹☹

具体步骤
----

### 一、获取用户配置文件

在电脑上下载和安装 Fiddler（下载地址见文末），将 U 盘插入光猫。

> > U 盘的格式一定要是 fat32，其它不行。不要用 usb3.0 以上的，识别不出来。**「用 2.0 的」**

打开浏览器，使用光猫背面的默认账号 (useradmin) 和密码登录光猫，进入 U 盘的文件管理界面。

![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvibyBjRJm3MeYKXDwiaV6fVtDn1slhbo8p0kJ02gO6PAtrTProb4ibGDqA/640?wx_fmt=jpeg)

打开 Fiddler，点击红色方框处以启用请求前断点。

![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvzOHN4rhic4WEOJpYPDCfbeJ7y8O8tIuJOpPXcdqclLbOcD3la2Vfk3A/640?wx_fmt=png)

Fiddler 拦截请求 在浏览器的 U 盘文件管理界面点击任意一个文件夹（Fiddler 已经拦截请求，所以此时点击是无反应的）。

中兴光猫存储设置 回到 Fiddler 界面，选中所拦截的请求，修改 path 值为 / ，点击 Run to Completion。

![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvVjPibDR975HekSPh028UH04ibD1clzGXM8rEnkzeJicZEzCLQeicdvAYPg/640?wx_fmt=jpeg)

![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvaA63SNYqYhhj2icY4Gvcvzaic00icb7t1x5Qia6LSGXrxgIC7gOjkpCpBg/640?wx_fmt=jpeg)

<<<左右滑动见更多>>>

最后 点击红色方框处**「两次」**以取消 Fiddler 的断点。

![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvB6RFXnFWKMbIQ0IrJdEqRvVZn7VPkmfJ4S0xib0xN4djzGKvZuOwic4A/640?wx_fmt=png)

Fiddler 取消断点 回到浏览器光猫后台，打开 U 盘文件管理界面，可以看到目录下多了很多文件夹，不用理会，找到 userconfig 文件夹，打开后里面有 cfg 文件夹，将它复制到 U 盘其他路径下（也可直接复制里面的 db_user_cfg.xml 文件）。

拔下 U 盘插到电脑上，我们已经得到用户配置文件，接下来就要将它解密。

### 二、解密文件

我尝试按照网上的方法，用 ztecfg.exe 来解密，但是工具报错了，后面有大佬推荐用 RouterPassView，完美解决，最后也附上下载链接。

安装 RouterPassView 后打开，点击左上方**「文件」**，再点击打开**「路由器配置文件」**。选择并加载刚才得到的用户配置文件 db_user_cfg.xml ，确定加载。

很快文件信息就解密完成，按键盘 Ctrl + F 搜索 telecomadmin ，其中 User 后面的是超级管理员的用户名，Pass 后面的是对应的密码。

![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvHmaPQXQZRkKMgrpXouxv5Y2J2mA0k5Rgm9t6OqLGcp4KgkwrUPXfAw/640?wx_fmt=png)

至此破解成功，尤其注意，上面的步骤，只要有一处错误，就无法成功

我这个光猫还不是最恶心的，我听说有人把所有方法都试了也没能破开，悲😭

进阶
==

我要超密干啥来着，哦，配置公网 ipv6😉

后面我进光猫看了一下，其实冤枉装机师傅了，他是有分配 ipv6，但下发至路由器时，路由器对 ipv6 支持度不够，也可能路由器是 DHCP 上网，无法对下面分配的终端设备以公网 ipv6，后面呢，我对光猫做了一些配置，证实了我的猜测。

光猫从路由模式修改成桥接模式，通过路由器拨号，提高光猫稳定性

换句话说，光猫你只需做好光改电的任务就好，其它交给路由器。当然，我也没有完全放弃光猫的路由功能，新建了一个单 ipv4 的只走光猫 WiFi 两个频段的网络。

> ![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvD3Ymv6XicGbRMhKmQTmZWibIOcZPkoXY5vwXJRS97p4HoPuSChV48Rwg/640?wx_fmt=jpeg)
> 
> ![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvG22lmbokph4jntAtCcP3XVI3cVvGqcHjhmSmSiajAkyywBLsq7pZtEQ/640?wx_fmt=jpeg)
> 
> <<<左右滑动见更多>>>
> 
> 坐 ==> 座

进入路由器界面设置好拨号，完美上网，成功在 lan 端获取到公网 ipv6 了，之后凡是通过路由器的终端设备，都将获得一个公网 ipv6 地址，不管是无线还是有线连接😋

![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvInooiclDOdib8SicT2jI1MfTQe6LywDfN7zpIcooEq9EicSIIC2kopaJaA/640?wx_fmt=jpeg)

![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvZEjoXYtuTf8dSENGblqcSKeoAClHibPhiaIs7EgknG6W6DeDaLZ3q8xQ/640?wx_fmt=png)

<<<左右滑动见更多>>>

* * *

最后测试一下，外网通过本机电脑的公网 ipv6，能否访问相关服务。打开 cloudreve，

> *   **「公网 ipv6 地址」**加 5212 端口，成功访问。
>     
> *   ![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvthZvHhX8UArEX1CRQ1LYwiaoDAHn6ciaNNdwVicBPIHBX4aw7jd4KvJOw/640?wx_fmt=png)
>     
> *   域名映射这个 ipv6 地址，看看
>     
> *   ![](https://mmbiz.qpic.cn/mmbiz_jpg/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cvoSGFCbFndwTW3RXGvgXQZpI95MOtmky7tSYDzjyE1NBZyKvLxv3uog/640?wx_fmt=jpeg)
>     
> *   ![](https://mmbiz.qpic.cn/mmbiz_png/UTtmxEUtFKPhibBG7gyibmMfAZictpP53cviagfyXI5tuSxrRuCeH0cQ0mXeFqZEGMysSmonDPW720FCarV4KwOBnQ/640?wx_fmt=png)
>     
> *   成功，至此关于光猫的配置，和优化等等就完成了
>     
> 
> ☹☹☹

* * *

Fiddler(汉化版)：_https://yungman.lanzoul.com/i1M6b0wlovrg_

RouterPassView：_https://yungman.lanzoul.com/iLzlE0wlp46j_