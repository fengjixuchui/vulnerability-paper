<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/mT2Zpink-qKlII6AT2jM4Q)

**0x00 换了个光猫盒子**

事情是这样的，最近家里换光纤换成了联通的宽带。安装师傅拿了一个看起来就是二手的盒子来给我安装。大概长的是这个样子的，除了贴纸是新的其他看着就很老旧。

![图片](https://mmbiz.qpic.cn/mmbiz_png/auiclCmzibWgw8ibt135B6UkuQialQ9wZPY6IsldItljwp9iatPIBQlbFicqSBic8sQnwCIFLT3rg2ibD6ATdIcJUCRpvQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

打开界面是这个样子的，好家伙，首页还写着2013，看样子这个盒子的确是高寿了。

![图片](https://mmbiz.qpic.cn/mmbiz_png/auiclCmzibWgw8ibt135B6UkuQialQ9wZPY6jV1yYw8iciaNSRs16VNIdVDyKZEagMBhZ1Wp2G5dP6WfefynBic43j6Vg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

登录需要账号秘密，一般都是写在盒子背面的，果不其然，在盒子背面发现了。

![图片](https://mmbiz.qpic.cn/mmbiz_png/auiclCmzibWgw8ibt135B6UkuQialQ9wZPY6djx7eW3WSg8vqYPWWVJMS9LRz6qe7woq8icFt2fGUfxkNTMuBniaxh7A/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

然后就这样登录了进去，里面只有一些配置光猫的东西。

![图片](https://mmbiz.qpic.cn/mmbiz_png/auiclCmzibWgw8ibt135B6UkuQialQ9wZPY6KMTIyEtTzg9anL5VukhTdiaUAzeppfokUVwSdwprfZRK1tsOR9wg9zw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**0x01 扫着扫着发现个Telnet**

想着这种老盒子一般都是有漏洞的，先去扫一波看看开放了什么端口。

![图片](https://mmbiz.qpic.cn/mmbiz_png/auiclCmzibWgw8ibt135B6UkuQialQ9wZPY6CBTgHzY5vkfpbuNuC8306DqicE5GbWOK0JQd0JiaewokAPRuleQzp0IA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

好家伙竟然开启了23端口，直接telnet试一试。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

需要账号密码，试了一下root/root 并不能登入，但是telnet的banner提示了这个盒子的型号是F607A，于是去Github搜了一波。发现之前有人玩儿过这个盒子。默认密码是Zte521（中兴真自恋）。再次尝试，成功进入。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

**0x02 给盒子种个马试试**

首先去查询一下盒子的CPU架构，IOT盒子的架构一般是ARM或者MIPS，Linux下直接使用命令 cat /proc/cpuinfo 查看架构。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

IOT盒子一般是裁剪过的linux命令，所以用busybox命令查看一下有哪些能够下载的命令。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

还挺舒服，wget和tftp都有。下面用msf生成一个马传上去试一试。选择下面这个payload创建监听和生成马。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

在回连机上起一个python简单web服务器，方便下载马

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

发现并没有回连成功

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

有可能是iptables给拦截了，清除iptables试一试

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

再次运行，可以回连成功

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

接下来可以使用meterpreter的插件，对路由器进行更多的操作，比如把路由器的web的固件提取到本地。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)