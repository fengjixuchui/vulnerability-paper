> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/VzZQrMcj1BgMWrkvwd2z0Q)

 ![](http://mmbiz.qpic.cn/mmbiz_png/7XAvvlbibo1RFgAFeqib8ULThEGibyJ2xJy3UtvgN7jO2UiaUIQnfg4CIClelEogiav0N50lzKTJZlvLhOEFgQU65AA/0?wx_fmt=png) ** 阿乐你好 ** 安全相关信息推送 4篇原创内容   公众号

f0ng师傅二改了一个burp验证码爆破的插件![图片](https://mmbiz.qpic.cn/mmbiz_png/JGiakkdibZ42ia7jko2yR7d3kzccib6eWamPic0FM36eGVYVDZnayl6x4oiaCI7R50eibXjP9rqKj3YFDpedVpNk3Zdcg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)  

微信文章地址：[https://mp.weixin.qq.com/s/_P6OlL1xQaYSY1bvZJL4Uw](https://mp.weixin.qq.com/s?__biz=MzkzNzE4MTk4Nw==&mid=2247484153&idx=1&sn=88f64dfd53c521b752f4ef327d065789&scene=21#wechat_redirect)

这几天遇到一个没有限制登录次数，但是有验证码的目标，就想到了这个插件。

之前也配置好了，但是每次都要重新去打开py文件，我的懒癌犯了，今天基于f0ng师傅的文章，配置一个公网vps识别验证码的api服务器。

  

1.下载captcha-killer-modified

地址：https://github.com/f0ng/captcha-killer-modified

2.加载插件

![图片](https://mmbiz.qpic.cn/mmbiz_png/JGiakkdibZ42ia7jko2yR7d3kzccib6eWamP7wqicV7S4pTLO36oGVPmPUoib70o7bjdZaSUYJJ4NLO06TabuvfesZXw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

3.vps （centos 7） 安装docker

curl -sSL https://get.daocloud.io/docker | sh

  

4.vps 下载ddddocr api server

_地址：https://github.com/sml2h3/ocr_api_server.git_

```
git clone https://github.com/sml2h3/ocr_api_server.git  
cd ocr_api_server  
# 修改entrypoint.sh中的参数，具体参数往上翻，默认9898端口，同时开启ocr模块以及目标检测模块  
# 编译镜像  
docker build -t ocr_server:v1 .  
# 运行镜像  
docker run -p 9898:9898 -d ocr_server:v1
```

部署好之后，docker ps -a看看

![图片](https://mmbiz.qpic.cn/mmbiz_png/JGiakkdibZ42ia7jko2yR7d3kzccib6eWamPD10ZPnGtcOSmBhXI1z9CPI3n2g0amcHrgiayWPicia15y5n82phzxDGhQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

映射到9898端口了，接下来验证连通性

```
curl -v http://ip:9898/ping
```

返回pong，表示成功  

![图片](https://mmbiz.qpic.cn/mmbiz_png/JGiakkdibZ42ia7jko2yR7d3kzccib6eWamPySeNpib4lfUibLiaRb7865eWo8EjOIUMQAyaiawkBpfOVV2HLLEWvQjgAw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

5.配置captcha-killer-modified

第一次打开是这样的  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

需要填入验证码的url，把images勾选上

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

根据经验，这就是验证码的url  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

右键包，Extensions->captcha-killer-modified->captcha-killer->Send to  captcha panel

点击获取，就是这个样子，成功获取到了验证码  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

然后修改一下f0ng师傅的模板  

原模版如下

```
`POST /reg HTTP/1.1``Host: 127.0.0.1:8888``Connection: close``Cache-Control: max-age=0``Upgrade-Insecure-Requests: 1``User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36``Sec-Fetch-Mode: navigate``Sec-Fetch-User: ?1``Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3``Sec-Fetch-Site: none``Accept-Encoding: gzip, deflate``Accept-Language: zh-CN,zh;q=0.9``Content-Type: application/x-www-form-urlencoded``Content-Length: 55``<@BASE64><@IMG_RAW></@IMG_RAW></@BASE64>`
```

修改后  

Host需要修改成docker部署好之后的vps地址和端口  

```
`POST /ocr/b64/json HTTP/1.1``Host: ip:port``Authorization:Basic f0ngauth``User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:97.0) Gecko/20100101 Firefox/97.0``Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8``Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2``Accept-Encoding: gzip, deflate``Connection: keep-alive``Upgrade-Insecure-Requests: 1``Content-Type: application/x-www-form-urlencoded``Content-Length: 8332``<@BASE64><@IMG_RAW></@IMG_RAW></@BASE64>`
```

然后点击识别  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

可以看到，验证码已经成功识别出来了，匹配方式和规则需要自己去调试。

  

6.爆破模块

f0ng师傅二开的插件适配了新版的burp，很强。

这里有个时间问题，验证码一般都会带着一个标识符，来表示目前登录账号密码对应的验证码，所以我们需要把当前页面的验证码和登录所需要的验证码一起发包才能实现爆破。

首先按照正常的步骤，做一次登录

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

这里可以看到，抓到两个包，一个是当前登录的验证码和登录的post请求包  

把验证码的包按照第5步发送到captcha-killer-modified就不要动了，因为一切都已经配置好了  

然后把post请求包发送到爆破模块  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

验证码爆破设置  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

就可以愉快的爆破了  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

 ![](http://mmbiz.qpic.cn/mmbiz_png/7XAvvlbibo1RFgAFeqib8ULThEGibyJ2xJy3UtvgN7jO2UiaUIQnfg4CIClelEogiav0N50lzKTJZlvLhOEFgQU65AA/0?wx_fmt=png) ** 阿乐你好 ** 安全相关信息推送 4篇原创内容   公众号

最后，希望各位表哥工作生活爱情可行，不可刑![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)