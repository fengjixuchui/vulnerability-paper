<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/3Qqbr9bAg8IlmjFY7bsJ3A)

由于微信公众号推送机制改变了，快来星标不再迷路，谢谢大家！![](https://mmbiz.qpic.cn/mmbiz_png/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWWHiaWibqwZp5qLSHQ4kGPu3wlJDibpowJBNu1IHYY3lgA03FliaC1CwlBw/640?wx_fmt=png)长亭非常牛、非常好用的雷池 Waf 免费开放社区版啦！

![](https://mmbiz.qpic.cn/mmbiz_png/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWvCaBurxhoJK0pEj0WN7gf4J3T0wp9TRDPMHBZibDYbCkKNjxfQ1hmJg/640?wx_fmt=png)

雷池 SafeLine 社区版
===============

### 不让黑客越雷池半步

一款简单、好用的 WAF 工具。基于长亭科技王牌的 🤖️智能语义分析算法🤖️ 打造，专为社区设计。

✨ Demo
------

![](https://mmbiz.qpic.cn/mmbiz_gif/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWmGHOjqWWOODr0VcicCSQPURvrllibGQ2jgX5gu48icuvg8T0LibAZuUMog/640?wx_fmt=gif)![](https://mmbiz.qpic.cn/mmbiz_gif/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWhXibwjDugiaPwiakvsHK26RJDOWFEneYXic2pxEuFCicoSGMgldexh4JnIw/640?wx_fmt=gif)

🚀 安装
-----

### 1. 确保机器上正确安装 Docker 和 Compose V2

```
docker info
docker compose version


```

### 2. 安装产品镜像

```
# 下载安装脚本文件
wget https://github.com/chaitin/safeline/releases/download/v1.0.0/safeline.zip -O safeline.zip
unzip safeline.zip
cd safeline
# 首次部署需执行 `./safeline-ce.sh` 生成初始化配置，默认安装在 `/data/safeline-ce/` 目录下
./safeline-ce.sh
# 运行
sudo docker compose up -d


```

🕹️ 快速使用
--------

### 1. 登录

浏览器打开后台管理页面 `https://<waf-ip>:9443`。根据界面提示，使用 **「支持 TOPT 的认证软件」** 扫描二维码，然后输入动态口令登录：

![](https://mmbiz.qpic.cn/mmbiz_gif/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWcVSIBaCSic985a2ygnz0iaPkn6wPaWrHmBRzcxolfJKuibRYib8AnR88MQ/640?wx_fmt=gif)safeline_login.gif

### 2. 添加站点

![](https://mmbiz.qpic.cn/mmbiz_gif/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWhXibwjDugiaPwiakvsHK26RJDOWFEneYXic2pxEuFCicoSGMgldexh4JnIw/640?wx_fmt=gif)safeline_website.gif

💡 TIPS: 添加后，执行 `curl -H "Host: <域名>" http://<WAF IP>:<端口>` 应能获取到业务网站的响应。

### 3. 将网站流量切到雷池

*   若网站通过域名访问，则可将域名的 DNS 解析指向雷池所在设备
    
*   若网站前有 nginx 、负载均衡等代理设备，则可将雷池部署在代理设备和业务服务器之间，然后将代理设备的 upstream 指向雷池
    

### 4. 开始防护👌

试试这些攻击方式：

*   浏览器访问 `http://<IP或域名>:<端口>/webshell.php`
    
*   浏览器访问 `http://<IP或域名>:<端口>/?id=1%20AND%201=1`
    
*   浏览器访问 `http://<IP或域名>:<端口>/?a=<script>alert(1)</script>`
    

📖 FAQ
------

Q: 添加站点后，执行 `curl -H "Host: <域名>" http://<WAF IP>:<端口>` 无法访问到业务服务器。

—— A: 请检查雷池和业务服务器之间的网络连接

🏘️ 联系我们
--------

您可以通过 GitHub Issue 直接进行 Bug 反馈和功能建议。

Github:https://github.com/chaitin/safeline

✨ CTStack
---------

![](https://mmbiz.qpic.cn/mmbiz_png/ibxcwMR8shiabmYWLWXYAicOj8pHgBia0xDWQHbshqFBkQn8Uxcwx4BFQWTpMJMJuibywReaKTdacC29hGJIY0KP2pw/640?wx_fmt=png)

雷池 SafeLine 现已加入 CTStack 社区