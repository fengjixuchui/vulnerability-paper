> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/PVLOJnmulpoow-UAP78DIw)

**swaks简介：**

  

Swaks 是由John Jetmore编写和维护的功能强大、灵活、可编写脚本、面向事务的 SMTP 测试工具。同时对于一名信息安全高级工程师来说也是一个不错的利用工具！它通常被用来伪造邮件，进行钓鱼、社工等操作，但是这种也是具有一定风险的，同时在这里提醒广大用户在收到邮件时，不要直接打开邮件，先看看邮件的域名以及头标题等信息是否正确，不然一个贸然的操作有时候将可能导致自己被钓鱼甚至攻击！

  

  

### 下载：

  

kali 自带

官网：http://www.jetmore.org/john/code/swaks/

GitHub：https://github.com/jetmore/swaks

  

  

### **参数：**

-t  –to 目标地址 -t   test@test.com  
  
-f –from 来源地址 (发件人)  -f "text"  
  
–protocol 设定协议(未测试)  
  
--body "http://www.baidu.com"    //引号中的内容即为邮件正文；  
  
--header "Subject:hello"   //邮件头信息，subject为邮件标题  
  
-ehlo 伪造邮件ehlo头  
  
--data ./Desktop/email.txt    //将正常源邮件的内容保存成TXT文件，再作为正常邮件发送；

  

  

  

### **使用：**

在使用swaks进行伪造邮件时，我们要先确认对方是否开启了spf，如果开启了spf，那么是无法伪造邮件发送的。

  

nslookup -type=txt qq.com //windows  
  
dig -t txt qq.com         //linux

![图片](https://mmbiz.qpic.cn/mmbiz_png/P8LY1F0n2BOGagicRLTqZBqCSb7ia6wQolHeDN7Tw9cRiaN2cYwSblSLiaM2XKgDtBABeQvaAbPUYC0s8Buib2EiaO2Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

  

  

v=spf1 指采用SPF1版本

  

"v=spf1 -all" （拒绝所有，表示这个域名不会发出邮件）  
"v=spf1 +all" （接受所有）  
"v=spf1 ip4:192.168.0.1/16 -all"（只允许 192.168.0.1/16 范围内的IP发送邮件）  
"v=spf1 mx -all"（允许当前域名的 mx 记录对应的IP地址发送邮件）  
"v=spf1 mx mx:test.example.com -all"（允许当前域名和 test.example.com 的 mx 记录对应的IP地址发送邮件）  
"v=spf1 a mx ip4:173.194.72.103 -all"（允许当前域名的 a 记录和 mx 记录和一个给定的IP地址发送邮件）  
"v=spf1 include:example.com -all"（采用和 example.com 一样的SPF记录）

  

  

  

接下来用临时邮箱做测试

临时邮箱地址：https://www.linshi-email.com/

  

swaks -to tcqioaccow@iubridge.com

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

如图所示返回即表示可以进行伪造邮件发送

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

接下来我们进行伪造发送  

  

swaks --header-X-Mailer "" --header-Message-Id "" --header-"Content-Type"="text/html" --from "安全测试部" --ehlo shabimeiguo -header "Subject: 测试" --body 我们做了一个测试 --to tcqioaccow@iubridge.com

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

然后我们这边也成功收到了邮件

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

我们详细看看内容

  

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

  

  

  

  

### 其他用法

附件

  

swaks --header-X-Mailer "" --header-Message-Id "" --header-"Content-Type"="text/html" --from "安全测试部" --ehlo shabimeiguo -header "Subject: 测试" --body 我们做了一个测试 --to tcqioaccow@iubridge.com --attach 附件.zip

  

### 临时邮箱地址：

  

https://www.linshi-email.com/

  

扫描二维码关注我们

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)