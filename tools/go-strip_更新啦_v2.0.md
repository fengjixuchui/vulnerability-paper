<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/gI65TvrQTf0oSXPaEAtqVQ)

Go-strip
--------

*   支持一键混淆 Go 编译的 Windows、Linux、MacOS（amd64、386）的二进制文件。
    

「功能」

*   支持混淆
    

*   函数名称
    
*   函数路径
    
*   Go Struct
    
*   Type
    
*   Go Compiler Version
    
*   Go BuildID
    
*   Go Root
    

go-strip 更新啦 v2.0
-----------------

修复了几个 issue，将 go-strip 更新了。  
更新支持了 go 版本到 1.7.3，2021-11-04T13:55:24Z 版，原来的源码太糟糕了，今天花了一天时间重构了一遍，顺便写了一个测试用例，一键运行即可自动化测试 go 从 1.12 到 1.17 所有的版本。

原理
--

go-strip 具体原理可以参看公众号之前的文章

[如何消除 Go 的编译特征. md](http://mp.weixin.qq.com/s?__biz=MzU2NzcwNTY3Mg==&mid=2247484130&idx=1&sn=d482026bcd9d74b4b5bb5a62f02af10e&chksm=fc986bc5cbefe2d3e74ac3e892c10e9c65f968ac32bfbd3b0f373e09fe65c39f58ea3e62107f&scene=21#wechat_redirect)  

基本是调用 gore 的库，但是它里面没有提供读取位置的相关的变量，所以就自己写啦，本地化 gore 的包，在里面读取函数里面添加上位置信息或者写入随机信息的函数就行了，还要注意的是三个平台的文件格式，pe、elf、macho，都需要自己实现一次 pclntab 的获取，文件地址到内存地址的转换，这样才能把读取的内容重新写回去。想看懂代码的话，得自己完整看完 gore 的代码，再来动手做，很麻烦，不想看直接用成品就行了。

消除后的程序用 ida 查看，Go 程序自带函数 / 文件 / 路径都被混淆

![](https://mmbiz.qpic.cn/mmbiz_png/eLgL5R4W3FhV1YHEcOQuFUgkYHdB3vJmEbhG2ibicwJkGVibK1VlpA5ibJfJJ9x6JK9NqQSYe9bR1Z7gjiaG12W3MIg/640?wx_fmt=png)

成品
--

下载 https://github.com/boy-hack/go-strip/releases 最新版就行了

源码和广告
-----

安全人员可能更放心有源码的程序，go-strip 也开源在了我的知识星球，，可以按需下载。

> 很多黑客和安全工具的构造是那么巧妙，我看了很多安全工具的代码，将它们值得学习的地方记录了下来。开发 + 安全的结合，Hacking 自动化就是好玩，这个仓库将持续更新星球中的精华文章，源码和思路，付费加入是我更新的动力。

星球文章概览仓库: https://github.com/boy-hack/zsxq  
或者在公众号回复 “知识星球” 得到更多相关信息