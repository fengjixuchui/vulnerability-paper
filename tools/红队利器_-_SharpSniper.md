<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/T6JI8QA5maPyxyAZ505QvA)

![](https://mmbiz.qpic.cn/mmbiz_png/aPmkR80bcV0nXlVsXPicDvwM2UquwEEuWVkTeto8RcLkSkCaIrZpFC6pjLknBqFDeUVDdAyCrXGRoU0wib3pSmzw/640?wx_fmt=png)

        通常，红队参与不仅仅是实现域管理员。一些客户希望查看域中的特定用户是否会受到威胁，例如 CEO。

        SharpSniper 是一个简单的工具，可以找到这些用户的 IP 地址，以便您可以定位他们。

        首先，它查询并制作域控制器列表，然后在任何 DC 上为您要查找的用户搜索登录事件，然后读取最近分配的 DHCP 登录 IP 地址。

cmd.exe（提供凭据）

```
C:\> SharpSniper.exe emusk DomainAdminUser DAPass123
User: emusk - IP Address: 192.168.37.130
```

cmd.exe（当前身份验证令牌，例如 Mimikatz pth）

```
C:\> SharpSniper.exe emusk
User: emusk - IP Address: 192.168.37.130
```

Cobalt Strike（供应凭证）

```
execute-assembly /path/to/SharpSniper.exe emusk DomainAdminUser DAPass123
User: emusk - IP Address: 192.168.37.130
```

```
execute-assembly /path/to/SharpSniper.exe emusk
User: emusk - IP Address: 192.168.37.130
```

Cobalt Strike（令牌）

```
execute-assembly /path/to/SharpSniper.exe emusk
User: emusk - IP Address: 192.168.37.130
```

https://github.com/HunnicCyber/SharpSniper