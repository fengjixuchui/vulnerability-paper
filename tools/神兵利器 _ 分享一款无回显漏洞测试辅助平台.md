<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/0IO3u-hrG279mILxjwaPng)

无回显漏洞测试辅助平台 (Spring Boot + Spring Security + Netty)，平台使用 Java 编写，提供 DNSLOG，HTTPLOG 等功能，辅助渗透测试过程中无回显漏洞及 SSRF 等漏洞的验证和利用。  

**项目地址：**

```
https://github.com/SPuerBRead/Bridge
```

0x01 主要功能

```
DNSLOG
HTTPLOG
自定义DNS解析
DNS Rebinding
自定义HTTP Response(Response内容、状态码、Header)
数据查询API
```

0x02 部署方法

  

**1. 手动部署**

#### **域名解析**

假设根域名是 dnslog.com，服务器 IP 是 10.10.10.10 进行以下配置

```
配置A记录，子域名ns，解析到10.10.10.10
配置NS记录，子域名dns，解析到ns.dnslog.com
配置A记录，子域名dnslog，解析到10.10.10.10
```

dnslog.dnslog.com 用于访问平台 web，dns.dnslog.com 作为测试时 payload 中设置的域名，每个用户对应 dns.dnslog.com 下的子域名，如 1.dns.dnslog.com

登录平台后可以在 API 信息中看到对应的地址，子域名随意设置，对应上即可

#### **数据库配置**

#### 登录 mysql 执行以下命令，bridge.sql 在程序的根目录下

```
source bridge.sql
```

#### **服务器配置**

#### 环境：Java 1.8、Maven

#### 修改 resources 目录下 application.properties 文件中的 web 服务端口（默认 80 端口）和数据库连接信息

```
mvn clean package -DskipTests
```

maven 生成的 jar 包位置在 target 目录下，如 dns_log-0.0.1-SNAPSHOT.jar

```
java -jar dns_log-0.0.1-SNAPSHOT.jar dns.dnslog.com dnslog.dnslog.com 10.10.10.10 a1b2c3d4
```

*   第一个参数指定 payload 设置对应的子域名
    
*   第二个参数指定访问平台对应的子域名
    
*   第三个参数服务器的 IP 地址
    
*   第四个参数设置注册时的注册暗号，注册需要填写该字段
    

### **2. Docker 部署**

域名解析部分与手动部署相同，无需配置数据库和服务器

```
git clone https://github.com/SPuerBRead/Bridge.git
cd ./Bridge
```

默认的 mysql 密码是 password，若要修改，请保持以下两项中的密码相同（可不修改）

```
1. docker-compose.yml文件中的MYSQL_ROOT_PASSWORD项
2. 程序配置文件application.properties中的spring.datasource.password
```

修改 docker-compose.yml 倒数第三行 command 的值，此处为启动命令，将对应参数替换成域名配置中的信息，如：

```
java -jar dns_log-0.0.1-SNAPSHOT.jar dns.dnslog.com dnslog.dnslog.com 10.10.10.10 a1b2c3d4
```

参数含义见手动部署部分。

配置完成后执行以下命令：

```
docker-compose build
docker-compose up -d
```

访问 dnslog.dnslog.com（实际域名根据根域名和配置而定）即可看到登录界面。

0x03 部分截图

  

DNSLOG

![](https://mmbiz.qpic.cn/mmbiz_jpg/79gZQNibQ6ueclQQwNeJFB3B6npicOhesLosNXUL9E9u35YichpKCQssrfMe8v3NgKp1Glz4hp9WxJ787LVn3b4GA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

HTTPLOG

![](https://mmbiz.qpic.cn/mmbiz_jpg/79gZQNibQ6ueclQQwNeJFB3B6npicOhesLcaKT4fLlK3d77RsHttDHLDhMVv3yLAic3YicZn8OxXmiaiaTiaBlNJibMvPQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

0x04 API 接口

  

apiKey 在登录后的 API 信息页面中  

#### dnslog 查询接口

```
http://xxx.xx/api/dnslog/search?token={apiKey}&keyword={test}
```

keyword 参数值必须是完整除去 logAdress 后的部分，此处没有模糊查询，如 aaaaaa.1.dnslog.com 对应 keyword=aaaaaa，返回数据格式样例如下：

```
[
  {
    "ip": "localhost",
    "host": "test1.1.dns.xxxx.com",
    "time": "2019-07-30 15:25:14.0",
    "type": "A(1)"
  }
]
```

#### httplog 查询接口

```
http://xxx.xx/api/weblog/search?token={apiKey}&keyword={test}
```

keyword 要求同上，返回数据格式样例如下：

```
[
  {
    "path": "/",
    "method": "POST",
    "data": "",
    "ip": "10.10.37.75",
    "host": "test.1.dns.xxxx.com",
    "header": "{\"content-length\":\"22896\",\"postman-token\":\"9575b873-ccd9-4d5b-ba8a-c1f746e40086\",\"host\":\"test.1.dns.xxxx.com\",\"content-type\":\"text/plain\",\"connection\":\"keep-alive\",\"cache-control\":\"no-cache\",\"accept-encoding\":\"gzip, deflate\",\"user-agent\":\"PostmanRuntime/7.13.0\",\"accept\":\"*/*\"}",
    "time": "2019-07-23 17:50:10.0",
    "params": null,
    "version": "HTTP/1.1"
  }
]
```

**侵权请私聊公众号删文**

 **热文推荐**  

*   [蓝队应急响应姿势之 Linux](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523380&idx=1&sn=27acf248b4bbce96e2e40e193b32f0c9&chksm=f9e3f36fce947a79b416e30442009c3de226d98422bd0fb8cbcc54a66c303ab99b4d3f9bbb05&scene=21#wechat_redirect)  
    
*   [通过 DNSLOG 回显验证漏洞](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523485&idx=1&sn=2825827e55c1c9264041744a00688caf&chksm=f9e3f3c6ce947ad0c129566e5952ac23c990cf0428704df1a51526d8db6adbc47f998ee96eb4&scene=21#wechat_redirect)  
    
*   [记一次服务器被种挖矿溯源](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523441&idx=2&sn=94c6fae1f131c991d82263cb6a8c820b&chksm=f9e3f32ace947a3cdae52cf4cdfc9169ecf2b801f6b0fc2312801d73846d28b36d4ba47cb671&scene=21#wechat_redirect)  
    
*   [内网渗透初探 | 小白简单学习内网渗透](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523346&idx=1&sn=4bf01626aa7457c9f9255dc088a738b4&chksm=f9e3f349ce947a5f934329a78177b9ce85e625a36039008eead2fe35cbad5e96a991569d0b80&scene=21#wechat_redirect)  
    
*   [实战 | 通过恶意 pdf 执行 xss 漏洞](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523274&idx=1&sn=89290e2b7a8e408ff62a657ef71c8594&chksm=f9e3f491ce947d8702eda190e8d4f7ea2e3721549c27a2f768c3256de170f1fd0c99e817e0fb&scene=21#wechat_redirect)  
    
*   [免杀技术有一套（免杀方法大集结）(Anti-AntiVirus)](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523189&idx=1&sn=44ea2c9a59a07847e1efb1da01583883&chksm=f9e3f42ece947d3890eb74e4d5fc60364710b83bd4669344a74c630ac78f689b1248a2208082&scene=21#wechat_redirect)  
    
*   [内网渗透之内网信息查看常用命令](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247522979&idx=1&sn=894ac98a85ae7e23312b0188b8784278&chksm=f9e3f5f8ce947cee823a62ae4db34270510cc64772ed8314febf177a7660de08c36bedab6267&scene=21#wechat_redirect)  
    
*   [关于漏洞的基础知识](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247523083&idx=2&sn=0b162aba30063a4073bad24269a8dc0e&chksm=f9e3f450ce947d4699dfebf0a60a2dade481d8baf5f782350c2125ad6a320f91a2854d027e85&scene=21#wechat_redirect)  
    
*   [任意账号密码重置的 6 种方法](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247522927&idx=1&sn=075ccdb91ae67b7ad2a771aa1d6b43f3&chksm=f9e3f534ce947c220664a938bc42926bee3ca8d07c6e3129795d7c8977948f060b08c0f89739&scene=21#wechat_redirect)  
    
*   [干货 | 横向移动与域控权限维持方法总汇](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247522810&idx=2&sn=ed65a8c60c45f9af598178ed20c89896&chksm=f9e3f6a1ce947fb710ff77d8fbd721220b16673953b30eba6b10ad6e86924f6b4b9b2a983e74&scene=21#wechat_redirect)  
    
*   [手把手教你 Linux 提权](http://mp.weixin.qq.com/s?__biz=MzUyMTA0MjQ4NA==&mid=2247522500&idx=2&sn=ec74a21ef0a872f7486ccac6772e0b9a&chksm=f9e3f79fce947e89eac9d9077eee8ce74f3ab35a345b1c2194d11b77d5b522be3b269b326ebf&scene=21#wechat_redirect)
    

****欢迎关注 LemonSec****

**觉得不错点个 **“赞”**、“在看 “**