<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/BuvYj4-pacKlnCUFzOIsHw)

![](https://mmbiz.qpic.cn/mmbiz_png/SE49V9dKJrynhicSC9oWDibJEW3BUhEIWManZGCkeyNxMv9pQzctc5ZF2mlFAnYQegWvg559w1Gw4nJndYHQaJUg/640?wx_fmt=png)

**戟星安全实验室**

    忆享科技旗下高端的网络安全攻防服务团队. 安服内容包括渗透测试、代码审计、应急响应、漏洞研究、威胁情报、安全运维、攻防演练等

  

本文约 1437 字，图片 13 张，阅读约需 4 分钟。

#####   

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

安装

我使用的环境

```
服务端：Ubuntu 22.04 LTS （官方建议：Ubuntu 20.04 / 22.04）
客户端：kali 2020.4
```

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

安装客户端依赖

1.kali

```
sudo apt install
build-essential
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.10 python3.10-dev
```

2.Ubuntu 20.04 / 22.04

```
sudo apt install
build-essential
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.10 python3.10-dev
```

3.Debian 10/11

```
echo 'deb
http://ftp.de.debian.org/debian bookworm main' >> /etc/apt/sources.list
sudo apt update
sudo apt install python3-dev python3.10-dev
libpython3.10 libpython3.10-dev python3.10
```

4.MacOS

```
brew install
--cask cmake
brew install python@3.10 qt@5 spdlog golang
brew link --overwrite qt@5
```

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

编译客户端

```
cd Havoc/Client
chmod +x Install.sh
./Install.sh
make （这里安装比较慢，请耐心等待）
./Havoc
```

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

搭建服务端（Ubuntu）

```
cd Havoc/Teamserver
./Install.sh
go mod download golang.org/x/sys 
go mod download github.com/ugorji/go
```

_注：如果使⽤ go mod download golang.org/x/sys 报错的话是因为 golang 版本过低， 因为 golang 对 go-modules 的初步⽀持出现在 1.11 和 1.12 版本中，更新 golang 版本就可以解决_

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

设置服务端配置

服务端的配置文件位置

```
Havoc/Teamserver/profiles/havoc_default.yaotl
```

![图片](https://mmbiz.qpic.cn/mmbiz_png/SE49V9dKJrx9Hk3oF9rrY4wnIuQNaTa921Z9XB1jAs5BIzYic6ad5JwgBcZfBY84b90jHFRnLT4R0iaxz3RL189g/640?wx_fmt=png)

musl 编辑器下载地址

```
http://musl.cc/x86_64-w64-mingw32-cross.tgz
```

设置好配置文件直接启动

```
./teamserver server --profile profiles/havoc.yaotl -v
```

![图片](https://mmbiz.qpic.cn/mmbiz_gif/pLGTianTzSu7XRhTMZOBAqXehvREhD5ThABGJdRialUx3dQWwO7fclsicyiajicKfvXV4kHs38nkwFxUSckVF2nYlibA/640?wx_fmt=gif)

  

免杀效果

![图片](https://mmbiz.qpic.cn/mmbiz_png/SE49V9dKJrx9Hk3oF9rrY4wnIuQNaTa9VK4Fs38p6UjysvYvOuItQqFD0l9ibUpmu3JeQFjwafQHHYjzSHvtxlQ/640?wx_fmt=png)

Defender :

![图片](https://mmbiz.qpic.cn/mmbiz_png/SE49V9dKJrx9Hk3oF9rrY4wnIuQNaTa9iaxHGeMXJCaxolIw5zBNKrepicfXghnJev3WkkPC008RQkZA6S4oeSWg/640?wx_fmt=png)

火绒：

![图片](https://mmbiz.qpic.cn/mmbiz_png/SE49V9dKJrx9Hk3oF9rrY4wnIuQNaTa9hjzzQU1yicvasaYITTCuY2RS36ozzRGLNa2OFYiaeYCG3nsfRjW4bUsQ/640?wx_fmt=png)

360:  

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/SE49V9dKJrx9Hk3oF9rrY4wnIuQNaTa9XWbOJR36mrR0fhsmpvbHMsru80bP7etY9ywXoicX6Zu6CnibD4H8GBNg/640?wx_fmt=jpeg)

*   Defender ✅
    
*   火绒安全 ✅
    
*   360 安全安全 ✅
    

github 项目地址

https://github.com/HavocFramework/Havoc

 声明

    由于传播、利用此文所提供的信息而造成的任何直接或者间接的后果及损失，均由使用者本人负责，戟星安全实验室及文章作者不为此承担任何责任。

    戟星安全实验室拥有对此文章的修改和解释权。如欲转载或传播此文章，必须保证此文章的完整性，包括版权声明等全部内容。未经破军安全实验室允许，不得任意修改或者增减此文章内容，不得以任何方式将其用于商业目的。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/SE49V9dKJrynhicSC9oWDibJEW3BUhEIWMV4H85J4YckN52SrMs6g39J9hFmm1gicqv7aoxqzzueEib840W2oUlFXg/640?wx_fmt=jpeg)

**戟星安全实验室**

# 长按二维码 关注我们 #