<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/6n2vee9sRTxqKsVnT_SqOA)

![](https://mmbiz.qpic.cn/mmbiz_png/aPmkR80bcV2YLUmVLnfC5cpEnGibaOdxXpdX1Wibjab6ucfHibibqyzkjqeZuR6r22o0ibZCHIOJeYFicJUvC4v2zRfA/640?wx_fmt=png)

安装与使用
-----

```
git clone https://github.com/t3l3machus/Villain
cd ./Villain
pip3 install -r requirements.txt
```

```
Villain.py [-h] [-p PORT] [-x HOAX_PORT] [-c CERTFILE] [-k KEYFILE] [-u] [-q]
```

以 root 身份运行：

```
Villain.py [-h] [-p PORT] [-x HOAX_PORT] [-c CERTFILE] [-k KEYFILE] [-u] [-q]
```

1.  Villain 具有内置的自动混淆有效载荷功能，旨在帮助用户绕过 AV 解决方案（针对 Windows 有效载荷）。
    
2.  每个生成的有效负载只会工作一次。已经使用过的有效负载不能重新用于建立会话。
    
3.  兄弟服务器之间的通信使用 AES 加密，使用接收兄弟服务器的 ID 作为加密 KEY，本地服务器 ID 的前 16 个字节作为 IV。在两个兄弟服务器的初始连接握手期间，每个服务器的 ID 都以明文形式交换，这意味着握手可以被捕获并用于解密兄弟服务器之间的流量。我知道这样很 “弱”。它不应该是超级安全的，因为这个工具被设计用于渗透测试 / 红队评估，这个加密模式应该足够了。
    
4.  相互连接的反派实例（兄弟服务器）也必须能够直接相互访问。我打算添加一个网络路由映射实用程序，以便兄弟服务器可以使用彼此作为代理来实现它们之间的跨网络通信。
    

![](https://mmbiz.qpic.cn/mmbiz_png/aPmkR80bcV2YLUmVLnfC5cpEnGibaOdxXjkWMcslciajhIZ2J5eXOL2I3NM0lvYvZOibPRgvJYIjau2wQnDEq47hQ/640?wx_fmt=png)

如果您执行启动交互式会话的命令，后门 shell 将挂起。

*   对于 Windows，生成的有效负载甚至可以在 PowerShell 约束语言模式下运行。
    
*   生成的有效负载甚至可以由权限有限的用户运行。
    

https://github.com/t3l3machus/Villain