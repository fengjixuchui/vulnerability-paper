<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/3DZFuM94OnNtj1m4T1nX7Q)

### 简介

*   windows/Linux(理论支持 Mac) 远程管理：屏幕监控（win）、键盘记录（linux 需 root 权限）、文件管理、命令执行
    

`被控端逻辑代码分离，被控端连到服务器才下发逻辑代码，后期可动态更新被控端功能，而不需要重新下载编译`

*   目前可以使用的功能：
    

`屏幕监控、键盘记录、文件管理（上传、遍历、在线编辑、删除、重命名、下载、解压缩zip）、命令执行(屏幕监控有bug)`

### 安装

*   关于运行 (运行的 server 机器需要 python3.8+)
    

```
git clone https://github.com/mycve/TerminalController.gitcd TerminalController/serverpython -m pip install -r requirements.txtpython server.py
```

### 关于构建客户端说明

```
linux被控端:依赖python3的环境->输入服务器地址（默认为的URL）->可以直接生成在buildout目录
windows被控端:输入服务器地址点击创建后，手动运行目录下的build.cmd，在弹出的界面（非web弹出）一直点下一步（调用win系统自带打包工具），等待打包完，到buildout目录
你也可以使用Python打包工具（pyintaller，pyexe，nuitka等）打包二进制，修改client目录下__main__.py服务器地址如：SERVER_ADDRESS = "https://xxx.com",接着到linux、win、mac下使用例如`pyinstaller -F client/app.py` 打包可执行文件(如果你看不懂这句话，参考下面Pyinstaller)
服务端生成被控制端需要windows机器运行server，如果不需要生成被控端，server也可以在Linux上启动
```

### 坑 1

*   默认`TerminalController/server/views/make/__init__.py`文件可以通过浏览器传输的服务端地址自定义，但是每次都会把`__main__.py`文件重置为空，而且原始代码使用的是 rw，python3 默认没有 rw 这个 mode，会报这个错`io.UnsupportedOperation: not readable`
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5tXYyqib7gB15N2JbyPPzJVdJ2K6gSOPstChFUuZGrX5UZAQagQwaXfw/640?wx_fmt=png)

*   因为注释了上面的文件，所以需要手动修改`__main__.py`内的配置，需要把第 23、25、37 行的 ip 换成远控 ip 和端口，PS：强烈推荐上 tls，采用 https 访问 + CDN+Nginx 反代
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5YFdF2iaWEWz9OmUicSx2iayusu0DFncwT1p6Z7o6IwQSpLVubEiaic2oBFg/640?wx_fmt=png)

### 坑 2  

*   按上面弄了以后，终端有上线记录，但是 web 端没有数据，那是因为在`/TerminalController/server/plugins/core.py`文件里面还需要把 ip 改成服务端的 ip 和端口，默认是 127.0.0.1:5000
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5C2sMjabVXd1u198KaibMI0XPGmBTicBrDbdQGF3svWb9335Idtib2Ql9A/640?wx_fmt=png)

### 客户端打包上线  

#### linux

*   配置好以后，直接在 web 端，点击下面按钮
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5kV1rHt1usS8cV6Tf2IwWhAvLb3iciabOgQ1XXzTb155FkOuYSxN2iccgg/640?wx_fmt=png)

*   选择生成就可以了
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5xiahat3ibORBtiaVl3FCdDN6ADPrqgjTfnWGZHfknauPleVicydjkw02uw/640?wx_fmt=png)

*   会在`TerminalController/buildout`目录生成一个 linux 的可执行文件
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5LLENHBhSxxr0TQz7xpqNbMCT0v3HVYDVgdrVfBD9hpLFdNfdib1Ymng/640?wx_fmt=png)

#### Windows  

*   windows 的需要在 windows 下（也需要修改`__main__.py`文件）双击运行`build.cmd`
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5WRS29plY2jkRXxiajBbcbWDkATWPAiaZFHe6GGmMOoYAQbqnhShYnwibw/640?wx_fmt=png)

*   然后一直下一步，最后就可以在`TerminalController/buildout`目录生成一个 windows 的可执行文件
    

### 基本操作

*   键盘记录、文件管理（上传、遍历、在线编辑、删除、重命名、下载、解压缩 zip）、命令执行
    

![](https://mmbiz.qpic.cn/mmbiz_png/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b51hhBEKpJ8NWZL59UuL0OiapYu3zamghibcTdbRq0EHnUglPgG9uYO0Nw/640?wx_fmt=png)

### 预览

![](https://mmbiz.qpic.cn/mmbiz_gif/Cnm7wITedqJWTUM2bd9mFLBZztXibib5b5vQerU8ejJnVS9ibia85qLUKicQpQl2XZiccia7vv206FCKic11ZEjBdb4nQA/640?wx_fmt=gif)

### 优缺点  

#### 优点

*   开源系统，二次开发方便
    
*   直接修改 py 代码进行编译，可快速绕过杀软
    
*   部署便捷，只要有 python3 环境，linux、Windows、macos 均可控制
    

#### 缺点

*   功能还未完善还存在 bug
    

  

secteam 公众号

  

微信搜索 : secteam

长按识别二维码关注

![](https://mmbiz.qpic.cn/mmbiz_jpg/Cnm7wITedqKticW5ZWC15ibIkiassjrnzm49qKOiccGP2afCSib51VfB83AZYBQ0U09vmYVILSh2dlRXUiaojRYxDX0A/640?wx_fmt=jpeg)