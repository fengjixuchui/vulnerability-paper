<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/6agYEmigwqfTAROhydU-qA)

0x00 CDN，CMS，WAF 简介
-------------------

> 1、CDN 即内容分发网络，起初是为了提高网络的通讯效率，后被用于 IP 的隐藏技术。 
> 
> 2、CMS 即一个网站的成形开源框架，根据不同的版本不同的种类，可以方便的网站的一站式开发布局，但是使用具有漏洞版本的 CMS 也对网站有较大的影响。 
> 
> 3、WAF 通俗点讲就是网站的保护保镖，保护网站抵御攻击，但是 WAF 被识别也会给攻击者有相应的攻击手法应对相对应的 WAF 设备进行绕过。
> 
> * 本文涉及到的工具汇总后台回复 “**打点”** 获取
> 
> ❞

0x01 CDN 绕过方法小结
---------------

**（1）冷门 dns 解析** 使用 nslookup xxx 8.8.8.8    // 参考解析结果![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEzty38emdrmrHeZAMcQlr6HhYGVDfoRFY4G9s1uw7aTElvOuLOZ5y2g/640?wx_fmt=png)

**（2）不同的 IP 地域多次 ping    // 参考解析结果**

> 使用国内的 ping 结果与翻墙后的 IP 对目标进行 ping 操作，有些 CDN 可能只对国内的 IP 加装了 CDN 流量分发，而没有对其他地域加 CDN 国内：
> 
> ![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEyQBCOnCMTGeFafxbgYAxCDs1BhXRuzhgdJjl3xaw3qKKTcRO1Gb5Mw/640?wx_fmt=png)使用国外 IP（翻抢）：![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDME9LmkLX1WOc8kylhl1rk6tR7YKL2FmHgic0ejWHfXRcruz2kwhHRur1A/640?wx_fmt=png)使用 ping 对象：// 参考解析结果![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDME5105KQMDQFibVibib9XUh1YAlLuDseZica4GCK7fpu9EhibY1z9joIkgHow/640?wx_fmt=png)
> 
> ❞

**（3）黑暗引擎搜索对象：// 参考结果**

> fofa、知道创宇钟馗之眼、shodan 引擎、360kuake、qianx 等

> ![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEAqFEo721OXvOCNsjgxibbysiapFRk3vMOhLNryudAdZ8dWFuVc8fDRrg/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEug7ib1HpXyjhOia4sDVLCMFK00LUibRKUwt26AN556ZNqoHcmEpOicHlPw/640?wx_fmt=png)![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEGI3JMWpTV7aDuyMQkEMxPVg1Gv9suCG4VE9fs70kFvLpCgTzrlMwSw/640?wx_fmt=png)
> 
> ❞

> **（4）rss 订阅搜寻      // 参考结果，部分网站支持**
> 
> ![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEz6RChyzckhtodPoqmmpay7MNiaCyp1aUnOY8wczZJ2PdTwoJCwRmN5Q/640?wx_fmt=png)
> 
> ❞

**（5）zmap 大法，据说扫描全网 IP 一个小时内可以完毕！！** 参考：https://linux.cn/article-5860-1.html

****（6）网站证书查询，whois 挖掘全面域名相关信息    // 结果提供参考****

> 网址查询参考： 
> 
> 真实 IP 查询：https://www.ipip.net/ip.html
> 
> 超级 ping 检测是否存在 cdn：https://ping.aizhan.com/
> 
> 站长超级 ping 检测：http://ping.chinaz.com/
> 
> 网站数据挖掘参考：https://sitereport.netcraft.com/
> 
> 端口多种检测，IP 查询参考：https://viewdns.info/
> 
> cdn 检测地域范围：http://www.17ce.com/
> 
> 指纹信息查询：http://finger.tidesec.com/
> 
> **「自行参考，这里就不放图了」**
> 
> ❞

0x02 CMS 识别小结
-------------

**（1）默认中间件端口参考：**这里不仅仅涉及 cms，也涉及到网站的搭建，扫描对方开放的端口参考，但是不排除对方将端口隐藏或者转发，或者换了端口，这里只仅仅作为参考方法

> Nginx --- 80 Iis --- 80 Apache --- 80 Weblogic --- 7001 Tomcat ---8080 Jboss --- 8080 Webshpere 应用程序，默认端口号为 9080 webshpere 管理工具，默认端口号 9090❞

**（2）url / 数据包 / 目录扫描，根据特有目录搜索全网方式  // 提供参考**

> 将 url 中，或者数据包中特有的目录直接放在网上搜寻，可以查询到相关的中间件的信息
> 
> ![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDME36JXJnurA91ViapIZiazVJOjnJ56KIn5f6C0oick31LWMPb9ozOPPW6IQ/640?wx_fmt=png)搜索：![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEwTInTU2vedd0vYHU8YM9WVxVuoIn3tvWic4wUzsIuy9Uw8IfOvVhyCA/640?wx_fmt=png)
> 
> ❞

**（3）网站 robots.txt 文件参考**![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDME7B2ANtibMcM8wGN0BRE6sUAjR151icjpxNIHApjll8YDlXDicN4DSOL7A/640?wx_fmt=png)**（4）网站底部标签信息参考**![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEiaho3Z6gwrJDiaF2s6K66A75eYwJw0Guf1Nn1s1gfwPLZJ6hFIFlJAJQ/640?wx_fmt=png)**（5）网站在线 cms 识别，这里提供三个网站**

云溪指纹识别：https://www.yunsee.cn/  
可批量 cms 识别：http://whatweb.bugscaner.com/

潮汐指纹信息查询子域名旁站：http://finger.tidesec.com/

**（6）数据包抓取参考，查看返回数据包的 server**![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEnIAH0rkOMFdSRNGYIPicEP1MaU4Ngy9JZA0aKIpzuZiboBD56ChHuRBw/640?wx_fmt=png)**（7）工具扫描，给出四种工具**

御剑（比较老旧）、TideFinger（推荐使用）、WhatWeb（字典未更新）大宝剑（打点工具实用）

* 这里介绍一下 TideFinger 的使用：按照文档安装相关库：使用 python3

```
pip3 install -r requirements.txt  -i https://mirrors.aliyun.com/pypi/simple/

说明：sqlite3库在Python3 以上版本默认自带了该模块，如提示sqlite3出错请自行排查。
```

使用：![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEVHY7Bdrkar3mwmlCflf10wZyq4jibDeVxaOU7RzJRlTL6X1GYMkff5w/640?wx_fmt=png)

**（8）另外还要 github 上相关整理的库，使用 md5 值对比等，可以自行搜寻相关库，**访问 dev 库内的目录路径将文件另存为下载 使用命令查看文件 md5   命令后面加上 md5 对比

**（9）推荐指纹识别工具：wappalyzer：**![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEcHO4D6nbEN2Wm9sHq1VsEXoND5fkJ9hsZ0L6I9hzfZicT8kNwveLdVA/640?wx_fmt=png)

0x03 waf 识别方法
-------------

**（1）waf 拦截页面参考**参考 waf 页面：https://cloud.tencent.com/developer/article/1872310 一些网站安装了 d 盾等，当你对他进行尝试工具，waf 界面就会显示出来，达到 waf 识别，![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEM98kAKwQb0kfGPQoYOmdQuwRvan1zYQ2XU9YHFiaSpmHS5Qo5senomw/640?wx_fmt=png)

**（2）工具：wafw00f    （kali 自带）**

安装：`python setup.py install`

使用：`wafw00f>python main.py http://kxsy.work`![](https://mmbiz.qpic.cn/mmbiz_png/I1c6evzliamKWoFdJgHthwfDibcpI8zDMEaIAFiaViarSId9BI4CqMApia9C1TzysZz5iaichfveztXDr0jcZcmpeDZvw/640?wx_fmt=png)

0x04 小结
-------

以上的识别方法小编亲测，比较实用，有更好的方法欢迎师傅交流学习！总结不易，希望师傅指点，

本文涉及到的工具汇总后台回复 “**打点”** 获取

往期精彩文章

  

  

  

  

[安全技能充电 | 系统后门应急排查方法](http://mp.weixin.qq.com/s?__biz=MzUyMTAyODYwNg==&mid=2247497643&idx=1&sn=1ab95fb4b94982bf8b37e9b43004411f&chksm=f9e3e13ace94682c0f034373aac9831b57bee70c403317cffe25bc918807d15a00296cdffa28&scene=21#wechat_redirect)  

[SQL Server 从 0 到 1](http://mp.weixin.qq.com/s?__biz=MzUyMTAyODYwNg==&mid=2247497609&idx=1&sn=4fc754aec80f962a888eb734e7369d73&chksm=f9e3e118ce94680e0f847ebe65b302cf114b3860858c27109c005e6b4445167e39520cec3ef2&scene=21#wechat_redirect)  

[安服仔日记系列——某教育局内网被打穿](http://mp.weixin.qq.com/s?__biz=MzUyMTAyODYwNg==&mid=2247497605&idx=1&sn=c0baa6c4413ee362573f0063d37918b1&chksm=f9e3e114ce946802e965542df8d83bbf1368bd1223ab8e2faa6b311498f7abb7d31177b1792b&scene=21#wechat_redirect)  

[HVV 之基于 360 数据的 dga 恶意域名检测工具](http://mp.weixin.qq.com/s?__biz=MzUyMTAyODYwNg==&mid=2247497602&idx=1&sn=fb4f29673aeee5f9a502299e33c8130f&chksm=f9e3e113ce946805933a1e8820154f9ecd681d3d6be1fbcfb1556a024f2e1c90fabb8e510da4&scene=21#wechat_redirect)

  

  

![](https://mmbiz.qpic.cn/mmbiz_jpg/HQn53QYo2G6qibBGYUpMN61OzcccFkm56YqORO7w7y37jvy8e6Mj2DbBzkoIee5HNFnDlzsek47QJmmCgRMTwYw/640?wx_fmt=jpeg)

_技术支持：白帽子社区团队_

_—_ 扫码关注我们 _—_