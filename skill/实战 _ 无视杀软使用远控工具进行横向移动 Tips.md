<meta name="referrer" content="no-referrer"/>
> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/shBjB3G2SauUAHsfFWgNPg)

扫码领资料

获黑客教程

免费 & 进群

![](https://mmbiz.qpic.cn/mmbiz_png/CBJYPapLzSFJNibV2baHRo8G34MZhFD1sjTz4LHLiaKG9208VTU6pdTIEpC9jlW6UVfhIb9rHorCvvMsdiaya4T6Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

![](https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaaJcib7FH02wTKvoHALAMw4fchVnBLMw4kTQ7B9oUy0RGfiacu34QEZgDpfia0sVmWrHcDZCV1Na5wDQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

在有杀软拦截，CS 无法上线的情况下，经常用到 todesk 和向日葵这两个远控工具进行横向移动。不过这两个工具现在好像不怎么好用了。不过无所谓，用其他的就是了，听说最近 GotoHTTP 很火，可以试试看。

**1、GoToHTTP 的优点和缺点**
---------------------

**优点：**

*   B2C 模式，无需安装控制端软件，有浏览器就可以远控。
    
*   流量走 https 协议，只要目标放行 443 端口出口就可以实现内网穿透。
    
*   在低带宽也可以使用，运行占用内存极低，控制时占用 CPU 仅为 0%-3%。
    
*   被控端在类 Linux 系统上支持图形界面（GUI）和字符界面（CLI）。
    

**缺点：**

*   需要管理员权限运行
    
*   一些行为（网络唤醒远程主机）需要加载驱动，导致运行时 360 安全卫士会拦截这行为，其他杀软则不会拦截。
    

**2、GoToHTTP 使用**
-----------------

下载：http://www.gotohttp.com/goto/download.12x  
GoToHTTP 提供了多种系统的被控端，可以根据情况选用。

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3zXicdFsUp8DY9JlGibZu8LuZYia6JYCzcu20TM38GgUtgicibHSzpSbbiczQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

在本地虚拟机演示一下  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50o7NCj6XwY8nz7ibbZkSqE1yHbBo5ibhwptopibPdKwicgtlANTQXMEORNtw/640?wx_fmt=jpeg)

将 gotohttp.exe 上传到指定目录  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50o4zR3ovZfKibQRDvzMfAIcn5Y0YPgBpe5OyK6Sl7N18Tfy9haIVtqarw/640?wx_fmt=jpeg)

这里可以看到靶机直接弹出连接框了  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50onr0xf1Cx9k3qVmGxRKdyQEO27Xs4qS0Wxo1XG2myFxRWV8SIQaLdEQ/640?wx_fmt=jpeg)

在哥斯拉中，gotohttp.exe 目录下直接生成了配置文件  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50o12h1IpFibiblvQVRVSZyXtZIKW86P4xJHkt8dy1M7kmetwUyiau3xG4dw/640?wx_fmt=jpeg)

读取配置文件，可以获取电脑 ID 和控制码  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oVRCoJka1deJpWUTStyLQicwfWnibLFISNjTuomrgAfX6BlXqgic9MAoOg/640?wx_fmt=jpeg)

直接连接

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3mS50kTA7h8Hs9ibvDVQuaNFn749wZia5s7lKLc4obzHp0lIyzHIo2kBg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oEGJIqzdJaxW7K8Q3gqMTOhjhVRTwh80W9hJ0aDqLwqzbO97hCQ5kSA/640?wx_fmt=jpeg)

**1、RustDesk 介绍**
-----------------

看了精灵师傅的文章发现了另一个巨 TM 好用的远控工具，按照精灵师傅的话就是：它不仅有 GotoHTTP 的优点，还是免费开源的，而且还支持自建服务器，简直业界良心。

RustDesk 相比于 GoToHTTP 最大的优点就是：**普通权限即可运行，而且支持纯内网环境**。  
RustDesk 地址：http://rustdesk.com/zh/  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50onib3NwAjLm7LIjfcoTmVPPGbe60UpO4J5l6OJLSAwtC5eIIHhZT6Ricw/640?wx_fmt=jpeg)

注意：RuskDesk 控制端和被控制端是同一个应用

**2、RustDesk 使用**
-----------------

通过 webshell 上传 rustdesk  

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3ADyb1KxKK5zcCZnK61zib9ViauLWQd3swXmPfgIVV2lQeBWoRIDD9HUg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

运行 rustdesk  

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3UlOFvyr7SCg6iccqia7ap8ApPBXTJ5dUicM4FLlib0hcJxcjMRsaia8D1tw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

靶机会弹框，这个不需要管，我们直接去找配置文件  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oGXOfcA8yVmDJyibzjHsPwwOVJgZtOUzaJLMEOlW5e1CWAZjtdRSzKaw/640?wx_fmt=jpeg)

配置文件地址：C:\Users \ 用户名 \ AppData\Roaming\RustDesk\config

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oujqhFjHYrWqHNhT8efxZqwEphOsbEE7J40ovFibIjEW6ibppbW1iawt0A/640?wx_fmt=jpeg)  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oEZIfXZMvyFZK9K5q2Lwcn1e4ibl1GSCXWT2Vficu67qL7dVXpw4WicCgQ/640?wx_fmt=jpeg)

获取 id 和密码  

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3WnNHAscYagicdgAcic9FBlFVEgZnIZ3ZGx55O5XBHUEpuhZEYwOfmK0Q/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

成功连接

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50orVRv0paLhpEl3sqrm3ZQMcayP0ksUaFt9L4ibaibs2zCHzJgHnNbzwtg/640?wx_fmt=jpeg)

**3、踩坑实录**
----------

（1）要下载 RustDesk 的 portable 版本，不要下载 puts 版本。portable 版本免安装，puts 版本会弹框提示安装  
个版本下载地址：https://gitee.com/rustdesk/rustdesk/releases  

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p35rcsXic9TWbgghV6NFauBBBc0WnGe3LIDt2eaiczaZrfe1qJCh2zTRhw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

（2）不知道是不是 RustDesk 的 bug 还是出于安全考虑，如果是第一次在目标上运行 RustDesk，RustDesk 不会立即将密码保存到配置文件，而此时你把鼠标放在显示密码时则会保存到文件，遇到这种情况我们只需运行 RustDesk，生成配置文件后结束 RustDesk 进程，然后修改配置文件里 password 为指定密码，再运行 RustDesk 即可。  
修改配置文件 password

![](https://mmbiz.qpic.cn/mmbiz_jpg/bMyibjv83iavwNd7OW8rkbDnhavQr6o6p3jdGgaeYibc4b15BnjgzTmBMKMEuxKrvwmm5B9v9hhOJ9JYDdnFb1X0Q/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

重新启动 RustDesk

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oGPw50ThnNRrI3r2q9xIVFYSJ6Epd2dgSxUkHNGr8j9GovTp6EMHd8g/640?wx_fmt=jpeg)

成功修改密码

**4、RustDesk 在纯内网环境中的优势**
-------------------------

有时候我们打点控了一台跳板机，在内网有一台服务器有 webshell 权限，但是这台机器又不出网，而且上面装了多个杀软，防护开到最严，你又不知道目标账号密码，这时候你许多操作都会受限，这种场景还是挺常见的。这时候如果能远程过去把杀软退掉可能是一种捷径，而 RustDesk 就支持在内网使用 IP 进行直连。

在 RustDesk 默认设置中，允许 IP 直接访问功能未开启，如下图：

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oJQMHByTolrxGLCDp8QX5JuXkf6DJJP7ic6oq54FUVjMS9ZcJ0uE9Ivw/640?wx_fmt=jpeg)

针对这个问题，我们可以修改配置文件 RustDesk2.toml，在 options 下添加一行

然后重启 RustDesk 即可。  

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oQyicn5ib3zrEGHtEzNs22tOyjuuBJgibFMGibibjibiczlF5fHmJHFUM9XJQw/640?wx_fmt=jpeg)

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50opBntUiaHgyWHbP8XkwxJLJ9JEpSq6b1PVFR4fG9fBx25LsraggIkpAQ/640?wx_fmt=jpeg)

RustDesk 的实现 IP 直接访问功能监听的默认端口是 21118，这个端口也是可以修改的，同样的步骤修改配置文件 RustDesk2.toml，在 options 下添加一行 direct-access-port = '8443'，然后重启 RustDesk 即可。

注意：这里修改默认端口是因为在一些场景下被控端防火墙需要放行入站方向的指定端口。

在控制端输入目标地址（如果是默认端口直接输入 IP，如果是自定义端口输入 IP:PORT 格式），然后输入密码即可远控。

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50o0H38tCVf4jOCuibqWWmuTOyS8e1mTWOPOibOPIobXSqoaPwDribic304cw/640?wx_fmt=jpeg)

成功连接

![](https://mmbiz.qpic.cn/mmbiz_jpg/CBJYPapLzSGxXA1ltMjODaibMbjIiaG50oWfFCyerbBjWsUlbT2r3iarjiaggGbXjvJW4WRjKnD4aWARAexMtW3Zew/640?wx_fmt=jpeg)

```
作者：C0ldCash
原文地址：https://xz.aliyun.com/t/11557
```

声明：本公众号所分享内容仅用于网安爱好者之间的技术讨论，禁止用于违法途径，**所有渗透都需获取授权**！否则需自行承担，本公众号及原作者不承担相应的后果

@

**学习更多渗透技能！体验靶场实战练习**

```
（hack视频资料及工具）


（部分展示）




往期推荐

【精选】SRC快速入门+上分小秘籍+实战指南

爬取免费代理，拥有自己的代理池

漏洞挖掘｜密码找回中的套路

渗透测试岗位面试题(重点：渗透思路)

漏洞挖掘 | 通用型漏洞挖掘思路技巧

干货｜列了几种均能过安全狗的方法！

一名大学生的黑客成长史到入狱的自述

攻防演练｜红队手段之将蓝队逼到关站！

巧用FOFA挖到你的第一个漏洞







看到这里了，点个“赞”、“再看”
```